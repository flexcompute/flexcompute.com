---
author: Tom Chen
custom_css:
- learning-center/fdtd101
- learning-center/menu
- learning-center/home
custom_font: font2
description: This notebook demonstrates how to set up and run a FDTD simulation of
  a RGB CMOS image sensor.
image:
  alt: How to perform the simulation of a RGB CMOS image sensor in Tidy3D FDTD
  path: /assets/tidy3d/examples/image/rgb_cmos_sensor.png
layout: learning-center/example-library
menu_config:
  collapsed: true
  selected: Example Library
metadata:
  category: Metamaterials, Gratings, and Other Periodic Structures
  enable_more_examples: true
  more_examples:
  - name: Dielectric metasurface absorber
    path: notebooks/DielectricMetasurfaceAbsorber/
    thumbnail:
      description: Dielectric metasurface absorber
      image: /assets/tidy3d/examples/image/metasurface.png
  - name: Germanium Fano metasurface
    path: notebooks/HighQGe/
    thumbnail:
      description: Germanium Fano metasurface
      image: /assets/tidy3d/examples/image/fano_metasurface.png
  - name: Distributed Bragg reflector and cavity
    path: notebooks/DistributedBraggReflectorCavity/
    thumbnail:
      description: Distributed Bragg reflector and cavity
      image: /assets/tidy3d/examples/image/dbr_schematic.png
  pagination:
    next:
      name: Band structure calculation of a photonic crystal slab
      path: notebooks/Bandstructure/
    previous:
      name: Distributed Bragg reflector and cavity
      path: notebooks/DistributedBraggReflectorCavity/
  type: example-library
page_title: CMOS RGB image sensor
source_link: https:/docs.flexcompute.com/projects/tidy3d/en/latest/_sources/notebooks/CMOSRGBSensor.ipynb
tags:
- CMOS sensor
- RBG CMOS sensor
- RGB CMOS image sensor
- image sensor
- RGB image sensor
- Bayer cell
- Tidy3D
- FDTD
title: How to perform the simulation of a RGB CMOS image sensor in Tidy3D FDTD
---


<html lang="en">
<head><meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="/assets/tidy3d/examples/css/example-notebook.css" rel="stylesheet"/>





<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML-full,Safe"> </script>

<script type="text/x-mathjax-config">
    init_mathjax = function() {
        if (window.MathJax) {
        // MathJax loaded
            MathJax.Hub.Config({
                TeX: {
                    equationNumbers: {
                    autoNumber: "AMS",
                    useLabelIds: true
                    }
                },
                tex2jax: {
                    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                    displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
                    processEscapes: true,
                    processEnvironments: true
                },
                displayAlign: 'center',
                CommonHTML: {
                    linebreaks: {
                    automatic: true
                    }
                }
            });

            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        }
    }
    init_mathjax();
    </script>
<script type="module">
  document.addEventListener("DOMContentLoaded", async () => {
    const diagrams = document.querySelectorAll(".jp-Mermaid > pre.mermaid");
    // do not load mermaidjs if not needed
    if (!diagrams.length) {
      return;
    }
    const mermaid = (await import("https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.7.0/mermaid.esm.min.mjs")).default;
    const parser = new DOMParser();

    mermaid.initialize({
      maxTextSize: 100000,
      maxEdges: 100000,
      startOnLoad: false,
      fontFamily: window
        .getComputedStyle(document.body)
        .getPropertyValue("--jp-ui-font-family"),
      theme: document.querySelector("body[data-jp-theme-light='true']")
        ? "default"
        : "dark",
    });

    let _nextMermaidId = 0;

    function makeMermaidImage(svg) {
      const img = document.createElement("img");
      const doc = parser.parseFromString(svg, "image/svg+xml");
      const svgEl = doc.querySelector("svg");
      const { maxWidth } = svgEl?.style || {};
      const firstTitle = doc.querySelector("title");
      const firstDesc = doc.querySelector("desc");

      img.setAttribute("src", `data:image/svg+xml,${encodeURIComponent(svg)}`);
      if (maxWidth) {
        img.width = parseInt(maxWidth);
      }
      if (firstTitle) {
        img.setAttribute("alt", firstTitle.textContent);
      }
      if (firstDesc) {
        const caption = document.createElement("figcaption");
        caption.className = "sr-only";
        caption.textContent = firstDesc.textContent;
        return [img, caption];
      }
      return [img];
    }

    async function makeMermaidError(text) {
      let errorMessage = "";
      try {
        await mermaid.parse(text);
      } catch (err) {
        errorMessage = `${err}`;
      }

      const result = document.createElement("details");
      result.className = 'jp-RenderedMermaid-Details';
      const summary = document.createElement("summary");
      summary.className = 'jp-RenderedMermaid-Summary';
      const pre = document.createElement("pre");
      const code = document.createElement("code");
      code.innerText = text;
      pre.appendChild(code);
      summary.appendChild(pre);
      result.appendChild(summary);

      const warning = document.createElement("pre");
      warning.innerText = errorMessage;
      result.appendChild(warning);
      return [result];
    }

    async function renderOneMarmaid(src) {
      const id = `jp-mermaid-${_nextMermaidId++}`;
      const parent = src.parentNode;
      let raw = src.textContent.trim();
      const el = document.createElement("div");
      el.style.visibility = "hidden";
      document.body.appendChild(el);
      let results = null;
      let output = null;
      try {
        let { svg } = await mermaid.render(id, raw, el);
        svg = cleanMermaidSvg(svg);
        results = makeMermaidImage(svg);
        output = document.createElement("figure");
        results.map(output.appendChild, output);
      } catch (err) {
        parent.classList.add("jp-mod-warning");
        results = await makeMermaidError(raw);
        output = results[0];
      } finally {
        el.remove();
      }
      parent.classList.add("jp-RenderedMermaid");
      parent.appendChild(output);
    }


    /**
     * Post-process to ensure mermaid diagrams contain only valid SVG and XHTML.
     */
    function cleanMermaidSvg(svg) {
      return svg.replace(RE_VOID_ELEMENT, replaceVoidElement);
    }


    /**
     * A regular expression for all void elements, which may include attributes and
     * a slash.
     *
     * @see https://developer.mozilla.org/en-US/docs/Glossary/Void_element
     *
     * Of these, only `<br>` is generated by Mermaid in place of `\n`,
     * but _any_ "malformed" tag will break the SVG rendering entirely.
     */
    const RE_VOID_ELEMENT =
      /<\s*(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)\s*([^>]*?)\s*>/gi;

    /**
     * Ensure a void element is closed with a slash, preserving any attributes.
     */
    function replaceVoidElement(match, tag, rest) {
      rest = rest.trim();
      if (!rest.endsWith('/')) {
        rest = `${rest} /`;
      }
      return `<${tag} ${rest}>`;
    }

    void Promise.all([...diagrams].map(renderOneMarmaid));
  });
</script>

</head>
<body class="jp-Notebook" data-jp-theme-light="true" data-jp-theme-name="JupyterLab Light">
<main>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<blockquote>
<p>Note: The cost of running the entire notebook is higher than 1 FlexCredit.</p>
</blockquote>
<p>In this notebook, we show how to simulate optical processes in a CMOS RGB image sensor. The fundamental building blocks of the sensor are pixels, each containing microlens, color filters, and photodetector. Together, a pixel can perform multiple optical functionalities such as focusing, color filtering, and detection. Here, we illustrate how to set up the FDTD simulation and measure the performance of a typical CMOS image sensor composed of a periodic arrangement of Bayer unit cells, where we have one red (R), one blue (B), and two green (G) color filters, as shown below.</p>
<p><img alt="Bayer Unit Cell" src="/assets/tidy3d/examples/image/rgb_cmos_sensor.png" width="300"/></p>
<p>First, we will import Tidy3D and the other packages needed. If it is not installed, please do so with <code>pip install tidy3d</code>. We will use the <a href="https://docs.flexcompute.com/projects/tidy3d/en/latest/_autosummary/tidy3d.plugins.dispersion.FastDispersionFitter.html" target="_blank">FastDispersionFitter</a> plugin to fit hypothetical R, G, and B step-like absorbing filter materials.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[1]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># standard python imports</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Tidy3D imports</span>
<span class="kn">import</span> <span class="nn">tidy3d</span> <span class="k">as</span> <span class="nn">td</span>
<span class="kn">from</span> <span class="nn">tidy3d</span> <span class="kn">import</span> <span class="n">web</span>
<span class="kn">from</span> <span class="nn">tidy3d.plugins.dispersion</span> <span class="kn">import</span> <span class="n">FastDispersionFitter</span><span class="p">,</span> <span class="n">AdvancedFastFitterParam</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Simulation-Setup">Simulation Setup<a class="anchor-link" href="#Simulation-Setup">¶</a></h2><p>At the top of the Bayer unit cell structure, we have microlenses (silica) to focus the incoming light on the silicon photodetectors. Absorptive materials are placed below the microlenses to filter out the undesired colors at each pixel, and a metallic shield is responsible for reducing the crosstalk between neighboring unit cells. Electron-hole pairs are generated when light reaches the Si photodetector, and then the generated carriers are collected by metallic interconnections. A silicon nitride anti-reflection layer is employed to reduce the reflection losses at the silicon-silica interface. While this structure is intended to be a starting example, other color filter construction methods with improved efficiency and advanced metasurface-based color routing mechanisms are available in the literature [<a href="https://www.mdpi.com/1424-8220/19/7/1536" target="_blank">1</a>, <a href="https://opg.optica.org/oe/fulltext.cfm?uri=oe-16-25-20457&amp;id=175035" target="_blank">2</a>, <a href="https://ieeexplore.ieee.org/document/5427134" target="_blank">3</a>, <a href="https://www.nature.com/articles/s41467-022-31019-7" target="_blank">4</a>].</p>
<h3 id="Geometric-parameters">Geometric parameters<a class="anchor-link" href="#Geometric-parameters">¶</a></h3><p>Let's first specify all geometric parameters from the top to the bottom of the structure. Their values are not optimized. All the dimensions are in micrometers.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[2]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">Lx</span> <span class="o">=</span> <span class="n">Ly</span> <span class="o">=</span> <span class="mf">3.0</span>  <span class="c1"># Size of the Bayer unit cell along x- and y- direction.</span>
<span class="n">dPML</span> <span class="o">=</span> <span class="mf">1.5</span>  <span class="c1"># PML thickness at the top of the simulation domain.</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Let's consider the lens to be spherical caps (hemispheres). Since there are two by two lenses in a pixel, the diameter of the base of a cap is <code>Lx/2</code>. Once the radius is specified, the height of the cap can be computed analytically.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[3]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">width_len</span> <span class="o">=</span> <span class="n">Lx</span><span class="o">/</span><span class="mi">2</span>  <span class="c1"># Lens and color pixel width.</span>
<span class="n">radius_len</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="c1"># Lens radius.</span>

<span class="c1"># A focal distance = R*n/(n-1)~3um is sufficient.</span>
<span class="n">height_len</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">width_len</span><span class="o">/</span><span class="n">radius_len</span><span class="o">/</span><span class="mi">2</span><span class="p">)))</span><span class="o">*</span><span class="n">radius_len</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'The height of the lens is </span><span class="si">{</span><span class="n">height_len</span><span class="si">:</span><span class="s1">.3f</span><span class="si">}</span><span class="s1"> microns.'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>The height of the lens is 0.339 microns.
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Now, we can define the remaining geometrical parameters.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[4]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">d_len_to_filter</span> <span class="o">=</span> <span class="mf">0.2</span> <span class="c1"># Distance from the base of the lens to the top of the filter.</span>
<span class="n">t_filter</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="c1"># Filter thickness.</span>
<span class="n">d_filter_to_shield</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="c1"># Distance from the base of filter to the top of metallic shields.</span>

<span class="c1"># Metal shields are simplified to be metallic layer with holes.</span>
<span class="n">t_shield</span> <span class="o">=</span> <span class="mf">0.10</span> <span class="c1"># Shield thickness.</span>
<span class="n">radius_shield</span> <span class="o">=</span> <span class="mf">0.95</span> <span class="o">*</span> <span class="n">width_len</span> <span class="c1"># Radius of hole.</span>
<span class="n">d_shield_to_connect</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="c1"># Distance from the base of shield to the top of metallic interconnect.</span>

<span class="c1"># Metallic interconnects are assumed to be rectangular rods.</span>
<span class="n">t_connect</span> <span class="o">=</span> <span class="mf">0.10</span> <span class="c1"># Thickness.</span>
<span class="n">width_connect</span> <span class="o">=</span> <span class="mf">0.15</span> <span class="c1">#Width of each rod.</span>
<span class="n">gap_connect</span> <span class="o">=</span> <span class="mf">0.2</span> <span class="c1">#Gap between adjacent interconnection planes.</span>
<span class="n">distance_connect</span> <span class="o">=</span> <span class="mf">1.8</span><span class="o">*</span><span class="n">width_len</span> <span class="c1"># Distance between the center of rods parallel to the sides of unit cell. </span>

<span class="n">d_connect_to_AR</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="c1"># Distance from the base of the interconnects to the top of the anti-reflection layer.</span>
<span class="n">t_silicon</span> <span class="o">=</span> <span class="mi">2</span> <span class="c1"># Thickness of silicon photon-detector.</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We will consider the simulation in the visible spectrum of wavelength range [400, 700] nm.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[5]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">lam_range</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">]</span>

<span class="c1"># Central wavelength for RGB colors.</span>
<span class="n">lam_blue</span> <span class="o">=</span> <span class="mf">0.45</span>
<span class="n">lam_green</span> <span class="o">=</span> <span class="mf">0.55</span>
<span class="n">lam_red</span> <span class="o">=</span> <span class="mf">0.65</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Materials">Materials<a class="anchor-link" href="#Materials">¶</a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Here, we load relevant materials from Tidy3D's <a href="https://docs.flexcompute.com/projects/tidy3d/en/latest/material_library.html" target="_blank">material library</a>. Typical material choice is considered: photodetector made of silicon, metallic interconnects and shields made of aluminum, an anti-reflection layer made of silicon nitride, and most other optical components made of silica.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[6]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">SiN</span> <span class="o">=</span> <span class="n">td</span><span class="o">.</span><span class="n">material_library</span><span class="p">[</span><span class="s1">'SiN'</span><span class="p">][</span><span class="s1">'Horiba'</span><span class="p">]</span>
<span class="n">Silicon</span> <span class="o">=</span> <span class="n">td</span><span class="o">.</span><span class="n">material_library</span><span class="p">[</span><span class="s1">'aSi'</span><span class="p">][</span><span class="s1">'Horiba'</span><span class="p">]</span>
<span class="n">Silica</span> <span class="o">=</span> <span class="n">td</span><span class="o">.</span><span class="n">material_library</span><span class="p">[</span><span class="s1">'SiO2'</span><span class="p">][</span><span class="s1">'Palik_Lossless'</span><span class="p">]</span>
<span class="n">metal</span> <span class="o">=</span> <span class="n">td</span><span class="o">.</span><span class="n">material_library</span><span class="p">[</span><span class="s1">'Al'</span><span class="p">][</span><span class="s1">'Rakic1995'</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Next, we define the color filter materials. They are usually based on dye or pigment. The materials need to be very dispersive to achieve the color filtering functionality, e.g., the material for the red color filter is strongly absorptive of the blue and the green color light but transparent to the red color light. In running broadband FDTD simulation, those dispersive materials need to be fitted to analytical dispersive models such as the Drude-Lorentz model, Pole-residue pair model, etc. You can find a detailed explanation in this <a href="https://www.flexcompute.com/fdtd101/Lecture-5-Modeling-dispersive-material-in-FDTD" target="_blank">lecture</a>.</p>
<p>In this example, as a proof of principle, the color filter materials are defined artificially. In practice, many actual filter materials can provide better performance. We will use the <a href="https://docs.flexcompute.com/projects/tidy3d/en/latest/_autosummary/tidy3d.plugins.dispersion.FastDispersionFitter.html" target="_blank">FastDispersionFitter</a> plugin to fit the hypothetical R, G, and B step-like absorbing filter materials. To better fit the imaginary part of the refractive index, which is most important to describe the filter response, we will adjust <code>weights=(0.1, 1.9)</code> in <code>AdvancedFastFitterParam</code>.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[7]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Advanced fitter parameters.</span>
<span class="n">advanced_param</span> <span class="o">=</span> <span class="n">AdvancedFastFitterParam</span><span class="p">(</span><span class="n">weights</span><span class="o">=</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.9</span><span class="p">),</span> <span class="n">num_iters</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>

<span class="c1"># Red material</span>
<span class="n">fname_r</span> <span class="o">=</span> <span class="s2">"./misc/red_eps.csv"</span>
<span class="n">fitter_r</span> <span class="o">=</span> <span class="n">FastDispersionFitter</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">fname_r</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">","</span><span class="p">)</span>
<span class="n">mat_red</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">fitter_r</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">max_num_poles</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">eps_inf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">advanced_param</span><span class="o">=</span><span class="n">advanced_param</span><span class="p">,</span> <span class="n">tolerance_rms</span><span class="o">=</span><span class="mf">2e-2</span><span class="p">)</span>


<span class="c1"># Green material</span>
<span class="n">fname_g</span> <span class="o">=</span> <span class="s2">"./misc/green_eps.csv"</span>
<span class="n">fitter_g</span> <span class="o">=</span> <span class="n">FastDispersionFitter</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">fname_g</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">","</span><span class="p">)</span>
<span class="n">mat_green</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">fitter_g</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">max_num_poles</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">eps_inf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">advanced_param</span><span class="o">=</span><span class="n">advanced_param</span><span class="p">,</span> <span class="n">tolerance_rms</span><span class="o">=</span><span class="mf">2e-2</span><span class="p">)</span>

<span class="c1"># Blue material</span>
<span class="n">fname_b</span> <span class="o">=</span> <span class="s2">"./misc/blue_eps.csv"</span>
<span class="n">fitter_b</span> <span class="o">=</span> <span class="n">FastDispersionFitter</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">fname_b</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">","</span><span class="p">)</span>
<span class="n">mat_blue</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">fitter_b</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">max_num_poles</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">eps_inf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">advanced_param</span><span class="o">=</span><span class="n">advanced_param</span><span class="p">,</span> <span class="n">tolerance_rms</span><span class="o">=</span><span class="mf">2e-2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Output()</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">18:04:23 -03 </span><span style="color: #800000; text-decoration-color: #800000">WARNING: Unable to fit with weighted RMS error under               </span>
<span style="color: #7fbfbf; text-decoration-color: #7fbfbf">             </span><span style="color: #008000; text-decoration-color: #008000">'tolerance_rms'</span><span style="color: #800000; text-decoration-color: #800000"> of </span><span style="color: #008080; text-decoration-color: #008080; font-weight: bold">0.02</span><span style="color: #800000; text-decoration-color: #800000">                                            </span>
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Output()</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">18:04:46 -03 </span><span style="color: #800000; text-decoration-color: #800000">WARNING: Unable to fit with weighted RMS error under               </span>
<span style="color: #7fbfbf; text-decoration-color: #7fbfbf">             </span><span style="color: #008000; text-decoration-color: #008000">'tolerance_rms'</span><span style="color: #800000; text-decoration-color: #800000"> of </span><span style="color: #008080; text-decoration-color: #008080; font-weight: bold">0.02</span><span style="color: #800000; text-decoration-color: #800000">                                            </span>
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Output()</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">18:05:10 -03 </span><span style="color: #800000; text-decoration-color: #800000">WARNING: Unable to fit with weighted RMS error under               </span>
<span style="color: #7fbfbf; text-decoration-color: #7fbfbf">             </span><span style="color: #008000; text-decoration-color: #008000">'tolerance_rms'</span><span style="color: #800000; text-decoration-color: #800000"> of </span><span style="color: #008080; text-decoration-color: #008080; font-weight: bold">0.02</span><span style="color: #800000; text-decoration-color: #800000">                                            </span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Now, let's look at the obtained refractive indices and extinction spectra of color filter materials. It is worth mentioning that here we are fitting hypothetical materials whose dispersion is very distinct from a real one, so we have focused in obtaining a good description of the extinction coefficients in detriment of the real part of refractive indices. When considering real materials, it is usually possible to fit both real and imaginary parts of the refractive index with high accuracy.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[8]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">,</span> <span class="n">ax3</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">tight_layout</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fitter_r</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mat_red</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Material R"</span><span class="p">)</span>
<span class="n">fitter_g</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mat_green</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax2</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Material G"</span><span class="p">)</span>
<span class="n">fitter_b</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mat_blue</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax3</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Material B"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="/assets/tidy3d/examples/image/CMOSRGBSensor/CMOSRGBSensor_2.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Some-necessary-calculated-parameters:">Some necessary calculated parameters:<a class="anchor-link" href="#Some-necessary-calculated-parameters:">¶</a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[9]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Compute the thickness of anti-reflection layer so that it is reflectiveless for the green light.</span>
<span class="n">n_SiN</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">SiN</span><span class="o">.</span><span class="n">eps_complex_to_nk</span><span class="p">(</span><span class="n">SiN</span><span class="o">.</span><span class="n">eps_model</span><span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">C_0</span><span class="o">/</span><span class="n">lam_green</span><span class="p">))</span>
<span class="n">t_AR</span> <span class="o">=</span> <span class="n">lam_green</span><span class="o">/</span><span class="mi">4</span><span class="o">/</span><span class="n">n_SiN</span>

<span class="c1"># Total size of computational domain along z-direction.</span>
<span class="n">Lz</span> <span class="o">=</span> <span class="n">dPML</span> <span class="o">+</span> <span class="n">height_len</span> <span class="o">+</span> <span class="n">d_len_to_filter</span> <span class="o">+</span> <span class="n">t_filter</span> <span class="o">+</span> <span class="n">d_filter_to_shield</span> <span class="o">+</span> \
    <span class="n">t_shield</span> <span class="o">+</span> <span class="n">d_shield_to_connect</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">t_connect</span> <span class="o">+</span> <span class="n">gap_connect</span> <span class="o">+</span> <span class="n">d_connect_to_AR</span> <span class="o">+</span> <span class="n">t_AR</span> <span class="o">+</span> <span class="n">t_silicon</span>

<span class="c1"># Wavelength and frequency range for Gaussian source.</span>
<span class="n">freq_range</span> <span class="o">=</span> <span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">C_0</span><span class="o">/</span><span class="n">lam_range</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">td</span><span class="o">.</span><span class="n">C_0</span><span class="o">/</span><span class="n">lam_range</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">freq0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">freq_range</span><span class="p">))</span>
<span class="n">fwidth</span> <span class="o">=</span> <span class="n">freq0</span><span class="o">/</span><span class="mi">3</span>

<span class="c1"># Maximum simulation runtime.</span>
<span class="n">runtime</span> <span class="o">=</span> <span class="mi">100</span><span class="o">/</span><span class="n">fwidth</span>

<span class="c1"># Monitor frequency defined at the central wavelength of RGB colors.</span>
<span class="n">monitor_field_freqs</span> <span class="o">=</span> <span class="n">td</span><span class="o">.</span><span class="n">C_0</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">lam_red</span><span class="p">,</span> <span class="n">lam_green</span><span class="p">,</span> <span class="n">lam_blue</span><span class="p">])</span>
<span class="n">monitor_flux_freqs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">C_0</span><span class="o">/</span><span class="n">lam_range</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">td</span><span class="o">.</span><span class="n">C_0</span><span class="o">/</span><span class="n">lam_range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">200</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Structure-construction">Structure construction<a class="anchor-link" href="#Structure-construction">¶</a></h3><p>Now, we are ready to construct each component of the sensor. To build the four silica hemispherical lenses, we first create four spheres. The extra parts of the spheres can be overridden with a silica layer.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[10]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Initialize with empty list</span>
<span class="n">structs</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Center of the sphere.</span>
<span class="n">z0_len</span> <span class="o">=</span> <span class="n">Lz</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">dPML</span> <span class="o">-</span> <span class="n">radius_len</span>
<span class="n">x0_len</span> <span class="o">=</span> <span class="n">width_len</span> <span class="o">/</span> <span class="mi">2</span>
<span class="n">y0_len</span> <span class="o">=</span> <span class="n">width_len</span> <span class="o">/</span><span class="mi">2</span>

<span class="c1"># Names of the lens structures.</span>
<span class="n">len_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"len blue"</span><span class="p">,</span> <span class="s2">"len red"</span><span class="p">,</span> <span class="s2">"len green1"</span><span class="p">,</span> <span class="s2">"len green2"</span><span class="p">]</span>
<span class="c1"># Signs of their x,y center positions on the Bayer unit cell.</span>
<span class="n">len_sign</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]]</span>

<span class="c1"># Now we include the lens structures.</span>
<span class="k">for</span> <span class="n">l_name</span><span class="p">,</span> <span class="n">l_sign</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">len_names</span><span class="p">,</span> <span class="n">len_sign</span><span class="p">):</span>
    <span class="n">structs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="n">td</span><span class="o">.</span><span class="n">Structure</span><span class="p">(</span>
            <span class="n">geometry</span><span class="o">=</span><span class="n">td</span><span class="o">.</span><span class="n">Sphere</span><span class="p">(</span>
                <span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="n">l_sign</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">x0_len</span><span class="p">,</span> <span class="n">l_sign</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">y0_len</span><span class="p">,</span> <span class="n">z0_len</span><span class="p">),</span>
                <span class="n">radius</span><span class="o">=</span><span class="n">radius_len</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">medium</span><span class="o">=</span><span class="n">Silica</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">l_name</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>A silica layer covers from the base of the hemispherical lens to the top of the silicon photodetector.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[11]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Lower and upper boundary of the silica layer.</span>
<span class="n">z_lower_silica</span> <span class="o">=</span> <span class="o">-</span><span class="n">Lz</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="n">t_silicon</span>
<span class="n">z_upper_silica</span> <span class="o">=</span> <span class="n">Lz</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="n">dPML</span><span class="o">-</span><span class="n">height_len</span>

<span class="n">structs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
    <span class="n">td</span><span class="o">.</span><span class="n">Structure</span><span class="p">(</span>
        <span class="n">geometry</span><span class="o">=</span><span class="n">td</span><span class="o">.</span><span class="n">Box</span><span class="o">.</span><span class="n">from_bounds</span><span class="p">(</span>
            <span class="n">rmin</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">td</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span><span class="o">-</span><span class="n">td</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span><span class="n">z_lower_silica</span><span class="p">),</span>
            <span class="n">rmax</span> <span class="o">=</span> <span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span><span class="n">td</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span><span class="n">z_upper_silica</span><span class="p">),</span>
        <span class="p">),</span>
        <span class="n">medium</span><span class="o">=</span><span class="n">Silica</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">'silica layer'</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Construct the Bayer color filters.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[12]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Lower and upper boundary of the color filter layer.</span>
<span class="n">z_upper_filter</span> <span class="o">=</span> <span class="n">z_upper_silica</span> <span class="o">-</span> <span class="n">d_len_to_filter</span>
<span class="n">z_lower_filter</span> <span class="o">=</span> <span class="n">z_upper_filter</span> <span class="o">-</span> <span class="n">t_filter</span>

<span class="n">ePML</span> <span class="o">=</span> <span class="mi">100</span> <span class="c1">#um, extra length to extend into PML </span>

<span class="c1"># Color filter names.</span>
<span class="n">cf_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"blue filter"</span><span class="p">,</span> <span class="s2">"red filter"</span><span class="p">,</span> <span class="s2">"green1 filter"</span><span class="p">,</span> <span class="s2">"green2 filter"</span><span class="p">]</span>
<span class="c1"># Color filter materials.</span>
<span class="n">cf_materials</span> <span class="o">=</span> <span class="p">[</span><span class="n">mat_blue</span><span class="p">,</span> <span class="n">mat_red</span><span class="p">,</span> <span class="n">mat_green</span><span class="p">,</span> <span class="n">mat_green</span><span class="p">]</span> 
<span class="c1"># Minimum and maximum filter bound coordinates.</span>
<span class="n">cf_rmin</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="n">ePML</span><span class="p">,</span><span class="o">-</span><span class="n">ePML</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="n">ePML</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="n">ePML</span><span class="p">]]</span>
<span class="n">cf_rmax</span> <span class="o">=</span> <span class="p">[[</span><span class="n">ePML</span><span class="p">,</span><span class="n">ePML</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">ePML</span><span class="p">],</span> <span class="p">[</span><span class="n">ePML</span><span class="p">,</span><span class="mi">0</span><span class="p">]]</span>

<span class="c1"># Now we include the color filter structures.</span>
<span class="k">for</span> <span class="n">cf_name</span><span class="p">,</span> <span class="n">cf_mat</span><span class="p">,</span> <span class="n">r_min</span><span class="p">,</span> <span class="n">r_max</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">cf_names</span><span class="p">,</span> <span class="n">cf_materials</span><span class="p">,</span> <span class="n">cf_rmin</span><span class="p">,</span> <span class="n">cf_rmax</span><span class="p">):</span>
    <span class="n">structs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="n">td</span><span class="o">.</span><span class="n">Structure</span><span class="p">(</span>
            <span class="n">geometry</span><span class="o">=</span><span class="n">td</span><span class="o">.</span><span class="n">Box</span><span class="o">.</span><span class="n">from_bounds</span><span class="p">(</span>
                <span class="n">rmin</span> <span class="o">=</span> <span class="p">(</span><span class="n">r_min</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">r_min</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">z_lower_filter</span><span class="p">),</span>
                <span class="n">rmax</span> <span class="o">=</span> <span class="p">(</span><span class="n">r_max</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">r_max</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">z_upper_filter</span><span class="p">),</span>
            <span class="p">),</span>
            <span class="n">medium</span><span class="o">=</span><span class="n">cf_mat</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">cf_name</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Construct the metallic shields.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[13]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># A-coordinate of the center of metal shield.</span>
<span class="n">z0_shield</span> <span class="o">=</span> <span class="n">z_lower_filter</span> <span class="o">-</span> <span class="n">d_filter_to_shield</span> <span class="o">-</span> <span class="n">t_shield</span><span class="o">/</span><span class="mi">2</span>

<span class="c1"># First, a metallic layer:</span>
<span class="n">structs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
   <span class="n">td</span><span class="o">.</span><span class="n">Structure</span><span class="p">(</span>
       <span class="n">geometry</span><span class="o">=</span><span class="n">td</span><span class="o">.</span><span class="n">Box</span><span class="p">(</span>
           <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">td</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">t_shield</span><span class="p">),</span>
           <span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">z0_shield</span><span class="p">),</span>
       <span class="p">),</span>
       <span class="n">medium</span><span class="o">=</span><span class="n">metal</span><span class="p">,</span>
       <span class="n">name</span><span class="o">=</span><span class="s1">'metal shield'</span><span class="p">,</span>
   <span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Then, make a hole:</span>
<span class="n">structs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
   <span class="n">td</span><span class="o">.</span><span class="n">Structure</span><span class="p">(</span>
       <span class="n">geometry</span><span class="o">=</span><span class="n">td</span><span class="o">.</span><span class="n">Cylinder</span><span class="p">(</span>
           <span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">z0_shield</span><span class="p">),</span>
           <span class="n">axis</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
           <span class="n">length</span> <span class="o">=</span> <span class="n">t_shield</span><span class="p">,</span>
           <span class="n">radius</span> <span class="o">=</span> <span class="n">radius_shield</span><span class="p">,</span>
       <span class="p">),</span>
       <span class="n">medium</span><span class="o">=</span><span class="n">Silica</span><span class="p">,</span>
       <span class="n">name</span><span class="o">=</span><span class="s1">'metal shield hole'</span><span class="p">,</span>
   <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Construct the metallic interconnects.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[14]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Z-coordinate of the center of the interconnection planes.</span>
<span class="n">z0_connect</span> <span class="o">=</span> <span class="n">z0_shield</span> <span class="o">-</span> <span class="n">t_shield</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">d_shield_to_connect</span> <span class="o">-</span> <span class="n">t_connect</span><span class="o">/</span><span class="mi">2</span>
<span class="n">z1_connect</span> <span class="o">=</span> <span class="n">z0_connect</span> <span class="o">-</span> <span class="n">gap_connect</span>  <span class="o">-</span> <span class="n">t_connect</span>

<span class="c1"># Add the interconnections parallel to the sides of the unit cell.</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
    <span class="c1"># Locate the the interconnections at x-, y- directions in different planes.</span>
    <span class="n">zc</span> <span class="o">=</span> <span class="n">z0_connect</span> <span class="k">if</span> <span class="p">(</span><span class="n">i</span><span class="o">%</span><span class="mi">2</span><span class="p">)</span> <span class="k">else</span> <span class="n">z1_connect</span>

    <span class="n">center</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">zc</span><span class="p">]</span>
    <span class="n">center</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">i</span><span class="o">%</span><span class="mi">2</span><span class="p">,</span> <span class="n">distance_connect</span><span class="o">/</span><span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">**</span> <span class="p">(</span><span class="n">i</span><span class="o">//</span><span class="mi">2</span><span class="p">))</span>
    
    <span class="n">size</span> <span class="o">=</span> <span class="p">[</span><span class="n">td</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span><span class="n">t_connect</span><span class="p">]</span>
    <span class="n">size</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">i</span><span class="o">%</span><span class="mi">2</span><span class="p">,</span> <span class="n">width_connect</span><span class="p">)</span>
    <span class="n">structs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="n">td</span><span class="o">.</span><span class="n">Structure</span><span class="p">(</span>
            <span class="n">geometry</span><span class="o">=</span><span class="n">td</span><span class="o">.</span><span class="n">Box</span><span class="p">(</span>
                <span class="n">center</span> <span class="o">=</span> <span class="n">center</span><span class="p">,</span>
                <span class="n">size</span> <span class="o">=</span> <span class="n">size</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">medium</span><span class="o">=</span><span class="n">metal</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s1">'interconnect '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">)</span>

<span class="c1"># Add the interconnections at the center of the unit cell.</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
    <span class="c1"># Locate the the interconnections at x-, y- directions in different planes.</span>
    <span class="n">zc</span> <span class="o">=</span> <span class="n">z0_connect</span> <span class="k">if</span> <span class="p">(</span><span class="n">i</span><span class="o">%</span><span class="mi">2</span><span class="p">)</span> <span class="k">else</span> <span class="n">z1_connect</span>
    
    <span class="n">center</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">zc</span><span class="p">]</span>    
    <span class="n">size</span> <span class="o">=</span> <span class="p">[</span><span class="n">td</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">t_connect</span><span class="p">]</span>
    <span class="n">size</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">i</span><span class="o">%</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">width_connect</span><span class="p">)</span>
    <span class="n">structs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="n">td</span><span class="o">.</span><span class="n">Structure</span><span class="p">(</span>
            <span class="n">geometry</span><span class="o">=</span><span class="n">td</span><span class="o">.</span><span class="n">Box</span><span class="p">(</span>
                <span class="n">center</span> <span class="o">=</span> <span class="n">center</span><span class="p">,</span>
                <span class="n">size</span> <span class="o">=</span> <span class="n">size</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">medium</span><span class="o">=</span><span class="n">metal</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s1">'interconnect_ground '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Now, we will construct the antireflection layer.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[15]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># z-coordinate of the center</span>
<span class="n">z0_AR</span> <span class="o">=</span> <span class="n">z1_connect</span> <span class="o">-</span> <span class="n">t_connect</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">d_connect_to_AR</span> <span class="o">-</span> <span class="n">t_AR</span><span class="o">/</span><span class="mi">2</span>

<span class="n">structs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
    <span class="n">td</span><span class="o">.</span><span class="n">Structure</span><span class="p">(</span>
        <span class="n">geometry</span><span class="o">=</span><span class="n">td</span><span class="o">.</span><span class="n">Box</span><span class="p">(</span>
            <span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="n">z0_AR</span><span class="p">),</span>
            <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span><span class="n">td</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span><span class="n">t_AR</span><span class="p">),</span>
        <span class="p">),</span>
        <span class="n">medium</span><span class="o">=</span><span class="n">SiN</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">'anti-reflection'</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>And finally, we will finish the color filter structure by constructing the silicon photodetector layer.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[16]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Z-coordinate of the silicon photodetector center. Add substantial thickness to extend into PML</span>

<span class="n">z0_silica</span> <span class="o">=</span> <span class="o">-</span><span class="n">Lz</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">ePML</span>

<span class="n">structs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
    <span class="n">td</span><span class="o">.</span><span class="n">Structure</span><span class="p">(</span>
        <span class="n">geometry</span><span class="o">=</span><span class="n">td</span><span class="o">.</span><span class="n">Box</span><span class="p">(</span>
            <span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="n">z0_silica</span><span class="p">),</span>
            <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span><span class="n">td</span><span class="o">.</span><span class="n">inf</span><span class="p">,(</span><span class="n">t_silicon</span><span class="o">+</span><span class="n">ePML</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="p">),</span>
        <span class="p">),</span>
        <span class="n">medium</span><span class="o">=</span><span class="n">Silicon</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">'silicon layer'</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Boundary-condition-and-grid-setup">Boundary condition and grid setup<a class="anchor-link" href="#Boundary-condition-and-grid-setup">¶</a></h3><p>The pixel is periodic in <code>x</code>- and <code>y</code>- directions and is sandwiched by two absorber layers along the z-direction. Since there is a structure made of a dispersive medium extending into the absorber, we apply an adiabatic absorber instead of PML to ensure the stability of the simulation.</p>
<p>For spatial discretization, we apply the automatic meshing scheme where the mesh is finer inside the medium of a higher index of refraction.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[17]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Boundary condition</span>
<span class="n">absorber</span> <span class="o">=</span> <span class="n">td</span><span class="o">.</span><span class="n">Boundary</span><span class="o">.</span><span class="n">absorber</span><span class="p">()</span>
<span class="n">periodic</span> <span class="o">=</span>  <span class="n">td</span><span class="o">.</span><span class="n">Boundary</span><span class="o">.</span><span class="n">periodic</span><span class="p">()</span>
<span class="n">bspec</span> <span class="o">=</span> <span class="n">td</span><span class="o">.</span><span class="n">BoundarySpec</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">periodic</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">periodic</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="n">absorber</span><span class="p">)</span>

<span class="c1"># Grid specs</span>
<span class="n">grid_spec</span> <span class="o">=</span> <span class="n">td</span><span class="o">.</span><span class="n">GridSpec</span><span class="o">.</span><span class="n">auto</span><span class="p">(</span><span class="n">min_steps_per_wvl</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">wavelength</span><span class="o">=</span><span class="n">lam_green</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Source">Source<a class="anchor-link" href="#Source">¶</a></h3><p>For simplicity, we are using a plane wave source at normal incidence.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[18]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">source</span> <span class="o">=</span> <span class="n">td</span><span class="o">.</span><span class="n">PlaneWave</span><span class="p">(</span>
    <span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,(</span><span class="n">Lz</span><span class="o">-</span><span class="n">dPML</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span>
    <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">td</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">source_time</span> <span class="o">=</span> <span class="n">td</span><span class="o">.</span><span class="n">GaussianPulse</span><span class="p">(</span>
        <span class="n">freq0</span><span class="o">=</span><span class="n">freq0</span><span class="p">,</span>
        <span class="n">fwidth</span><span class="o">=</span><span class="n">fwidth</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">direction</span><span class="o">=</span><span class="s1">'-'</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">'planewave'</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Monitors">Monitors<a class="anchor-link" href="#Monitors">¶</a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We will include field monitors to observe the field propagating from the source to the silicon photodetectors. In addition, four flux monitors will be added to calculate the pixel power at the dielectric-silicon interface. A fill factor of 50% will be used to simulate the active region area of the phototetectors.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[19]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">monitors</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">z_silicon_top</span> <span class="o">=</span> <span class="o">-</span><span class="n">Lz</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="n">t_silicon</span>

<span class="c1"># Field monitor in xy plane just below antireflection layer.</span>
<span class="n">monitors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
    <span class="n">td</span><span class="o">.</span><span class="n">FieldMonitor</span><span class="p">(</span>
        <span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">Lz</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="n">t_silicon</span><span class="o">-</span><span class="mf">0.001</span><span class="p">),</span>
        <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">td</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="n">freqs</span> <span class="o">=</span> <span class="n">monitor_field_freqs</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">'field_xy_silicon'</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Field monitor in yz plane crossing the center blue and green filter.</span>
<span class="n">monitors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
    <span class="n">td</span><span class="o">.</span><span class="n">FieldMonitor</span><span class="p">(</span>
        <span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="n">width_len</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">td</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">td</span><span class="o">.</span><span class="n">inf</span><span class="p">),</span>
        <span class="n">freqs</span> <span class="o">=</span> <span class="n">monitor_field_freqs</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">'field_yz_BG'</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Field monitor in yz plane crossing the center red and green filter.</span>
<span class="n">monitors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
    <span class="n">td</span><span class="o">.</span><span class="n">FieldMonitor</span><span class="p">(</span>
        <span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">width_len</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">td</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">td</span><span class="o">.</span><span class="n">inf</span><span class="p">),</span>
        <span class="n">freqs</span> <span class="o">=</span> <span class="n">monitor_field_freqs</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">'field_yz_GR'</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Photodetector flux monitors.</span>
<span class="n">fmon_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"flux_si_blue"</span><span class="p">,</span> <span class="s2">"flux_si_red"</span><span class="p">,</span> <span class="s2">"flux_si_green1"</span><span class="p">,</span> <span class="s2">"flux_si_green2"</span><span class="p">]</span>  <span class="c1"># Names of the RGGB flux monitors.</span>
<span class="n">fmon_sign</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>  <span class="c1"># Signs of their x,y center positions on the Bayer unit cell.</span>

<span class="k">for</span> <span class="n">f_name</span><span class="p">,</span> <span class="n">f_sign</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">fmon_names</span><span class="p">,</span> <span class="n">fmon_sign</span><span class="p">):</span>
    <span class="n">monitors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="n">td</span><span class="o">.</span><span class="n">FluxMonitor</span><span class="p">(</span>
            <span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="n">f_sign</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">width_len</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">f_sign</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">width_len</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">z_silicon_top</span><span class="p">),</span>
            <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.7</span><span class="o">*</span><span class="n">width_len</span><span class="p">,</span> <span class="mf">0.7</span><span class="o">*</span><span class="n">width_len</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="n">freqs</span> <span class="o">=</span> <span class="n">monitor_flux_freqs</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">f_name</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Setup-simulation-object">Setup simulation object<a class="anchor-link" href="#Setup-simulation-object">¶</a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[20]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">sim</span> <span class="o">=</span> <span class="n">td</span><span class="o">.</span><span class="n">Simulation</span><span class="p">(</span>
    <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">Lx</span><span class="p">,</span><span class="n">Ly</span><span class="p">,</span><span class="n">Lz</span><span class="p">),</span>
    <span class="n">grid_spec</span> <span class="o">=</span> <span class="n">grid_spec</span><span class="p">,</span>
    <span class="n">structures</span> <span class="o">=</span> <span class="n">structs</span><span class="p">,</span>
    <span class="n">sources</span> <span class="o">=</span> <span class="p">[</span><span class="n">source</span><span class="p">],</span>
    <span class="n">monitors</span> <span class="o">=</span> <span class="n">monitors</span><span class="p">,</span>
    <span class="n">run_time</span> <span class="o">=</span> <span class="n">runtime</span><span class="p">,</span>
    <span class="n">boundary_spec</span> <span class="o">=</span> <span class="n">bspec</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Structure-Visualization">Structure Visualization<a class="anchor-link" href="#Structure-Visualization">¶</a></h2><p>We can see the 3D CMOS RGB sensor structure as below:</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[21]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">sim</span><span class="o">.</span><span class="n">plot_3d</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<iframe allowfullscreen="true" height="800" id="simulation-viewer169973681745826303" src="https://feature-simulation-viewer.d3a9gfg7glllfq.amplifyapp.com/simulation-viewer?uuid=169973681745826303" width="800"></iframe>
<script>
        
    window.postMessageToViewer169973681745826303 = event => {
        if(event.data.type === 'viewer'&&event.data.uuid==='169973681745826303'){
            document.getElementById('simulation-viewer169973681745826303').contentWindow.postMessage({ type: 'jupyter', uuid:'169973681745826303', value:{
    "type": "Simulation",
    "center": [
        0.0,
        0.0,
        0.0
    ],
    "size": [
        3.0,
        3.0,
        7.109496020553517
    ],
    "medium": {
        "name": null,
        "frequency_range": null,
        "allow_gain": false,
        "nonlinear_spec": null,
        "modulation_spec": null,
        "heat_spec": null,
        "type": "Medium",
        "permittivity": 1.0,
        "conductivity": 0.0
    },
    "structures": [
        {
            "geometry": {
                "type": "Sphere",
                "radius": 1.0,
                "center": [
                    0.75,
                    0.75,
                    1.0547480102767586
                ]
            },
            "name": "len blue",
            "type": "Structure",
            "medium": {
                "name": null,
                "frequency_range": [
                    59958491600000.0,
                    1998616386666666.8
                ],
                "allow_gain": false,
                "nonlinear_spec": null,
                "modulation_spec": null,
                "heat_spec": null,
                "type": "PoleResidue",
                "eps_inf": 1.5385442336875639,
                "poles": [
                    [
                        {
                            "real": -11504139.374277674,
                            "imag": -1.595196740783775e+16
                        },
                        {
                            "real": 7507685.43042605,
                            "imag": 4535416182817100.0
                        }
                    ],
                    [
                        {
                            "real": -249390.3565044153,
                            "imag": -172280738540723.53
                        },
                        {
                            "real": 46272.506981344035,
                            "imag": 99704543223121.88
                        }
                    ]
                ]
            }
        },
        {
            "geometry": {
                "type": "Sphere",
                "radius": 1.0,
                "center": [
                    -0.75,
                    -0.75,
                    1.0547480102767586
                ]
            },
            "name": "len red",
            "type": "Structure",
            "medium": {
                "name": null,
                "frequency_range": [
                    59958491600000.0,
                    1998616386666666.8
                ],
                "allow_gain": false,
                "nonlinear_spec": null,
                "modulation_spec": null,
                "heat_spec": null,
                "type": "PoleResidue",
                "eps_inf": 1.5385442336875639,
                "poles": [
                    [
                        {
                            "real": -11504139.374277674,
                            "imag": -1.595196740783775e+16
                        },
                        {
                            "real": 7507685.43042605,
                            "imag": 4535416182817100.0
                        }
                    ],
                    [
                        {
                            "real": -249390.3565044153,
                            "imag": -172280738540723.53
                        },
                        {
                            "real": 46272.506981344035,
                            "imag": 99704543223121.88
                        }
                    ]
                ]
            }
        },
        {
            "geometry": {
                "type": "Sphere",
                "radius": 1.0,
                "center": [
                    -0.75,
                    0.75,
                    1.0547480102767586
                ]
            },
            "name": "len green1",
            "type": "Structure",
            "medium": {
                "name": null,
                "frequency_range": [
                    59958491600000.0,
                    1998616386666666.8
                ],
                "allow_gain": false,
                "nonlinear_spec": null,
                "modulation_spec": null,
                "heat_spec": null,
                "type": "PoleResidue",
                "eps_inf": 1.5385442336875639,
                "poles": [
                    [
                        {
                            "real": -11504139.374277674,
                            "imag": -1.595196740783775e+16
                        },
                        {
                            "real": 7507685.43042605,
                            "imag": 4535416182817100.0
                        }
                    ],
                    [
                        {
                            "real": -249390.3565044153,
                            "imag": -172280738540723.53
                        },
                        {
                            "real": 46272.506981344035,
                            "imag": 99704543223121.88
                        }
                    ]
                ]
            }
        },
        {
            "geometry": {
                "type": "Sphere",
                "radius": 1.0,
                "center": [
                    0.75,
                    -0.75,
                    1.0547480102767586
                ]
            },
            "name": "len green2",
            "type": "Structure",
            "medium": {
                "name": null,
                "frequency_range": [
                    59958491600000.0,
                    1998616386666666.8
                ],
                "allow_gain": false,
                "nonlinear_spec": null,
                "modulation_spec": null,
                "heat_spec": null,
                "type": "PoleResidue",
                "eps_inf": 1.5385442336875639,
                "poles": [
                    [
                        {
                            "real": -11504139.374277674,
                            "imag": -1.595196740783775e+16
                        },
                        {
                            "real": 7507685.43042605,
                            "imag": 4535416182817100.0
                        }
                    ],
                    [
                        {
                            "real": -249390.3565044153,
                            "imag": -172280738540723.53
                        },
                        {
                            "real": 46272.506981344035,
                            "imag": 99704543223121.88
                        }
                    ]
                ]
            }
        },
        {
            "geometry": {
                "type": "Box",
                "center": [
                    0.0,
                    0.0,
                    0.08071891388307384
                ],
                "size": [
                    "Infinity",
                    "Infinity",
                    3.2709338483196646
                ]
            },
            "name": "silica layer",
            "type": "Structure",
            "medium": {
                "name": null,
                "frequency_range": [
                    59958491600000.0,
                    1998616386666666.8
                ],
                "allow_gain": false,
                "nonlinear_spec": null,
                "modulation_spec": null,
                "heat_spec": null,
                "type": "PoleResidue",
                "eps_inf": 1.5385442336875639,
                "poles": [
                    [
                        {
                            "real": -11504139.374277674,
                            "imag": -1.595196740783775e+16
                        },
                        {
                            "real": 7507685.43042605,
                            "imag": 4535416182817100.0
                        }
                    ],
                    [
                        {
                            "real": -249390.3565044153,
                            "imag": -172280738540723.53
                        },
                        {
                            "real": 46272.506981344035,
                            "imag": 99704543223121.88
                        }
                    ]
                ]
            }
        },
        {
            "geometry": {
                "type": "Box",
                "center": [
                    50.0,
                    50.0,
                    1.0161858380429063
                ],
                "size": [
                    100.0,
                    100.0,
                    1.0
                ]
            },
            "name": "blue filter",
            "type": "Structure",
            "medium": {
                "name": null,
                "frequency_range": null,
                "allow_gain": false,
                "nonlinear_spec": null,
                "modulation_spec": null,
                "heat_spec": null,
                "type": "PoleResidue",
                "eps_inf": 1.0,
                "poles": [
                    [
                        {
                            "real": -2.5138408155727516e+16,
                            "imag": 0.0
                        },
                        {
                            "real": 2.134075531483745e+16,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -5093695848453416.0,
                            "imag": 0.0
                        },
                        {
                            "real": 6006776482094603.0,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -1235698320099518.5,
                            "imag": 0.0
                        },
                        {
                            "real": -9995709438931270.0,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -322378848863555.6,
                            "imag": 0.0
                        },
                        {
                            "real": 8202421922994882.0,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -778431568249603.2,
                            "imag": -4134441360891110.5
                        },
                        {
                            "real": -740636497092446.1,
                            "imag": -263412963973873.62
                        }
                    ],
                    [
                        {
                            "real": -41218434203739.03,
                            "imag": -3700055619253623.0
                        },
                        {
                            "real": 2975108883594.063,
                            "imag": -1605300707171.455
                        }
                    ],
                    [
                        {
                            "real": -132193189005656.27,
                            "imag": -3896668982303240.5
                        },
                        {
                            "real": -132990661564496.52,
                            "imag": -30937789870734.082
                        }
                    ]
                ]
            }
        },
        {
            "geometry": {
                "type": "Box",
                "center": [
                    -50.0,
                    -50.0,
                    1.0161858380429063
                ],
                "size": [
                    100.0,
                    100.0,
                    1.0
                ]
            },
            "name": "red filter",
            "type": "Structure",
            "medium": {
                "name": null,
                "frequency_range": null,
                "allow_gain": false,
                "nonlinear_spec": null,
                "modulation_spec": null,
                "heat_spec": null,
                "type": "PoleResidue",
                "eps_inf": 1.0,
                "poles": [
                    [
                        {
                            "real": -2.560136229211462e+16,
                            "imag": 0.0
                        },
                        {
                            "real": -3530244667049094.0,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -1712799759833205.5,
                            "imag": 0.0
                        },
                        {
                            "real": 5254435056400755.0,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -444809594508986.1,
                            "imag": -3620961557191406.0
                        },
                        {
                            "real": -34522064105107.39,
                            "imag": -14086842123279.734
                        }
                    ],
                    [
                        {
                            "real": -404975288695790.44,
                            "imag": -2399064540511741.5
                        },
                        {
                            "real": -1096955631255125.1,
                            "imag": -650843077010247.1
                        }
                    ],
                    [
                        {
                            "real": -153736799335076.8,
                            "imag": -2864505654243863.0
                        },
                        {
                            "real": -8446490759222.458,
                            "imag": -9920423509582.053
                        }
                    ],
                    [
                        {
                            "real": -91320145381490.0,
                            "imag": -3025195811284892.0
                        },
                        {
                            "real": 64313368282053.05,
                            "imag": 74010019165258.62
                        }
                    ],
                    [
                        {
                            "real": -68229101432067.18,
                            "imag": -3036070030556570.5
                        },
                        {
                            "real": 25044077582185.48,
                            "imag": -88476693952230.14
                        }
                    ]
                ]
            }
        },
        {
            "geometry": {
                "type": "Box",
                "center": [
                    -50.0,
                    50.0,
                    1.0161858380429063
                ],
                "size": [
                    100.0,
                    100.0,
                    1.0
                ]
            },
            "name": "green1 filter",
            "type": "Structure",
            "medium": {
                "name": null,
                "frequency_range": null,
                "allow_gain": false,
                "nonlinear_spec": null,
                "modulation_spec": null,
                "heat_spec": null,
                "type": "PoleResidue",
                "eps_inf": 1.0,
                "poles": [
                    [
                        {
                            "real": -8324363275816600.0,
                            "imag": 0.0
                        },
                        {
                            "real": 2013863590581935.0,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -1570423685408185.5,
                            "imag": 0.0
                        },
                        {
                            "real": 2544376592039926.0,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -465767941214321.75,
                            "imag": -3504034876504002.0
                        },
                        {
                            "real": 252730414832955.1,
                            "imag": -386581467788928.56
                        }
                    ],
                    [
                        {
                            "real": -84184127763256.92,
                            "imag": -3061897778645395.0
                        },
                        {
                            "real": -75734969905878.16,
                            "imag": 12513931978293.348
                        }
                    ],
                    [
                        {
                            "real": -75900438934918.73,
                            "imag": -3086068108561171.5
                        },
                        {
                            "real": -7694660811725.35,
                            "imag": -16338345173973.123
                        }
                    ],
                    [
                        {
                            "real": -258221966525599.4,
                            "imag": -3206882633538000.5
                        },
                        {
                            "real": -15286482442891.846,
                            "imag": -9565844122055.273
                        }
                    ],
                    [
                        {
                            "real": -98626588996142.95,
                            "imag": -3862705407370628.0
                        },
                        {
                            "real": 121414711523342.98,
                            "imag": 4042745964645.88
                        }
                    ],
                    [
                        {
                            "real": -70997027743683.92,
                            "imag": -3872081947978551.0
                        },
                        {
                            "real": -24732714306512.86,
                            "imag": -23361637597381.887
                        }
                    ],
                    [
                        {
                            "real": -272769127743805.6,
                            "imag": -3711775210046190.0
                        },
                        {
                            "real": -40440051694155.87,
                            "imag": -69497269776288.8
                        }
                    ]
                ]
            }
        },
        {
            "geometry": {
                "type": "Box",
                "center": [
                    50.0,
                    -50.0,
                    1.0161858380429063
                ],
                "size": [
                    100.0,
                    100.0,
                    1.0
                ]
            },
            "name": "green2 filter",
            "type": "Structure",
            "medium": {
                "name": null,
                "frequency_range": null,
                "allow_gain": false,
                "nonlinear_spec": null,
                "modulation_spec": null,
                "heat_spec": null,
                "type": "PoleResidue",
                "eps_inf": 1.0,
                "poles": [
                    [
                        {
                            "real": -8324363275816600.0,
                            "imag": 0.0
                        },
                        {
                            "real": 2013863590581935.0,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -1570423685408185.5,
                            "imag": 0.0
                        },
                        {
                            "real": 2544376592039926.0,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -465767941214321.75,
                            "imag": -3504034876504002.0
                        },
                        {
                            "real": 252730414832955.1,
                            "imag": -386581467788928.56
                        }
                    ],
                    [
                        {
                            "real": -84184127763256.92,
                            "imag": -3061897778645395.0
                        },
                        {
                            "real": -75734969905878.16,
                            "imag": 12513931978293.348
                        }
                    ],
                    [
                        {
                            "real": -75900438934918.73,
                            "imag": -3086068108561171.5
                        },
                        {
                            "real": -7694660811725.35,
                            "imag": -16338345173973.123
                        }
                    ],
                    [
                        {
                            "real": -258221966525599.4,
                            "imag": -3206882633538000.5
                        },
                        {
                            "real": -15286482442891.846,
                            "imag": -9565844122055.273
                        }
                    ],
                    [
                        {
                            "real": -98626588996142.95,
                            "imag": -3862705407370628.0
                        },
                        {
                            "real": 121414711523342.98,
                            "imag": 4042745964645.88
                        }
                    ],
                    [
                        {
                            "real": -70997027743683.92,
                            "imag": -3872081947978551.0
                        },
                        {
                            "real": -24732714306512.86,
                            "imag": -23361637597381.887
                        }
                    ],
                    [
                        {
                            "real": -272769127743805.6,
                            "imag": -3711775210046190.0
                        },
                        {
                            "real": -40440051694155.87,
                            "imag": -69497269776288.8
                        }
                    ]
                ]
            }
        },
        {
            "geometry": {
                "type": "Box",
                "center": [
                    0.0,
                    0.0,
                    -0.033814161957093705
                ],
                "size": [
                    "Infinity",
                    "Infinity",
                    0.1
                ]
            },
            "name": "metal shield",
            "type": "Structure",
            "medium": {
                "name": null,
                "frequency_range": [
                    151926744799612.75,
                    1.5192674479961274e+16
                ],
                "allow_gain": false,
                "nonlinear_spec": null,
                "modulation_spec": null,
                "heat_spec": null,
                "type": "PoleResidue",
                "eps_inf": 1.0,
                "poles": [
                    [
                        {
                            "real": -176076476399307.25,
                            "imag": 0.0
                        },
                        {
                            "real": -2.0497198166085053e+17,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -55958309702844.36,
                            "imag": 0.0
                        },
                        {
                            "real": -1.9328759376610138e+18,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -32886941985772.406,
                            "imag": 0.0
                        },
                        {
                            "real": 2.985600009810314e+17,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -836904963.7321033,
                            "imag": 0.0
                        },
                        {
                            "real": 1.9664479588602982e+18,
                            "imag": 0.0
                        }
                    ]
                ]
            }
        },
        {
            "geometry": {
                "type": "Cylinder",
                "axis": 2,
                "sidewall_angle": 0.0,
                "reference_plane": "middle",
                "radius": 1.4249999999999998,
                "center": [
                    0.0,
                    0.0,
                    -0.033814161957093705
                ],
                "length": 0.1
            },
            "name": "metal shield hole",
            "type": "Structure",
            "medium": {
                "name": null,
                "frequency_range": [
                    59958491600000.0,
                    1998616386666666.8
                ],
                "allow_gain": false,
                "nonlinear_spec": null,
                "modulation_spec": null,
                "heat_spec": null,
                "type": "PoleResidue",
                "eps_inf": 1.5385442336875639,
                "poles": [
                    [
                        {
                            "real": -11504139.374277674,
                            "imag": -1.595196740783775e+16
                        },
                        {
                            "real": 7507685.43042605,
                            "imag": 4535416182817100.0
                        }
                    ],
                    [
                        {
                            "real": -249390.3565044153,
                            "imag": -172280738540723.53
                        },
                        {
                            "real": 46272.506981344035,
                            "imag": 99704543223121.88
                        }
                    ]
                ]
            }
        },
        {
            "geometry": {
                "type": "Box",
                "center": [
                    1.35,
                    0.0,
                    -0.9338141619570938
                ],
                "size": [
                    0.15,
                    "Infinity",
                    0.1
                ]
            },
            "name": "interconnect 0",
            "type": "Structure",
            "medium": {
                "name": null,
                "frequency_range": [
                    151926744799612.75,
                    1.5192674479961274e+16
                ],
                "allow_gain": false,
                "nonlinear_spec": null,
                "modulation_spec": null,
                "heat_spec": null,
                "type": "PoleResidue",
                "eps_inf": 1.0,
                "poles": [
                    [
                        {
                            "real": -176076476399307.25,
                            "imag": 0.0
                        },
                        {
                            "real": -2.0497198166085053e+17,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -55958309702844.36,
                            "imag": 0.0
                        },
                        {
                            "real": -1.9328759376610138e+18,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -32886941985772.406,
                            "imag": 0.0
                        },
                        {
                            "real": 2.985600009810314e+17,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -836904963.7321033,
                            "imag": 0.0
                        },
                        {
                            "real": 1.9664479588602982e+18,
                            "imag": 0.0
                        }
                    ]
                ]
            }
        },
        {
            "geometry": {
                "type": "Box",
                "center": [
                    0.0,
                    1.35,
                    -0.6338141619570937
                ],
                "size": [
                    "Infinity",
                    0.15,
                    0.1
                ]
            },
            "name": "interconnect 1",
            "type": "Structure",
            "medium": {
                "name": null,
                "frequency_range": [
                    151926744799612.75,
                    1.5192674479961274e+16
                ],
                "allow_gain": false,
                "nonlinear_spec": null,
                "modulation_spec": null,
                "heat_spec": null,
                "type": "PoleResidue",
                "eps_inf": 1.0,
                "poles": [
                    [
                        {
                            "real": -176076476399307.25,
                            "imag": 0.0
                        },
                        {
                            "real": -2.0497198166085053e+17,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -55958309702844.36,
                            "imag": 0.0
                        },
                        {
                            "real": -1.9328759376610138e+18,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -32886941985772.406,
                            "imag": 0.0
                        },
                        {
                            "real": 2.985600009810314e+17,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -836904963.7321033,
                            "imag": 0.0
                        },
                        {
                            "real": 1.9664479588602982e+18,
                            "imag": 0.0
                        }
                    ]
                ]
            }
        },
        {
            "geometry": {
                "type": "Box",
                "center": [
                    -1.35,
                    0.0,
                    -0.9338141619570938
                ],
                "size": [
                    0.15,
                    "Infinity",
                    0.1
                ]
            },
            "name": "interconnect 2",
            "type": "Structure",
            "medium": {
                "name": null,
                "frequency_range": [
                    151926744799612.75,
                    1.5192674479961274e+16
                ],
                "allow_gain": false,
                "nonlinear_spec": null,
                "modulation_spec": null,
                "heat_spec": null,
                "type": "PoleResidue",
                "eps_inf": 1.0,
                "poles": [
                    [
                        {
                            "real": -176076476399307.25,
                            "imag": 0.0
                        },
                        {
                            "real": -2.0497198166085053e+17,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -55958309702844.36,
                            "imag": 0.0
                        },
                        {
                            "real": -1.9328759376610138e+18,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -32886941985772.406,
                            "imag": 0.0
                        },
                        {
                            "real": 2.985600009810314e+17,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -836904963.7321033,
                            "imag": 0.0
                        },
                        {
                            "real": 1.9664479588602982e+18,
                            "imag": 0.0
                        }
                    ]
                ]
            }
        },
        {
            "geometry": {
                "type": "Box",
                "center": [
                    0.0,
                    -1.35,
                    -0.6338141619570937
                ],
                "size": [
                    "Infinity",
                    0.15,
                    0.1
                ]
            },
            "name": "interconnect 3",
            "type": "Structure",
            "medium": {
                "name": null,
                "frequency_range": [
                    151926744799612.75,
                    1.5192674479961274e+16
                ],
                "allow_gain": false,
                "nonlinear_spec": null,
                "modulation_spec": null,
                "heat_spec": null,
                "type": "PoleResidue",
                "eps_inf": 1.0,
                "poles": [
                    [
                        {
                            "real": -176076476399307.25,
                            "imag": 0.0
                        },
                        {
                            "real": -2.0497198166085053e+17,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -55958309702844.36,
                            "imag": 0.0
                        },
                        {
                            "real": -1.9328759376610138e+18,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -32886941985772.406,
                            "imag": 0.0
                        },
                        {
                            "real": 2.985600009810314e+17,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -836904963.7321033,
                            "imag": 0.0
                        },
                        {
                            "real": 1.9664479588602982e+18,
                            "imag": 0.0
                        }
                    ]
                ]
            }
        },
        {
            "geometry": {
                "type": "Box",
                "center": [
                    0.0,
                    0.0,
                    -0.9338141619570938
                ],
                "size": [
                    0.3,
                    "Infinity",
                    0.1
                ]
            },
            "name": "interconnect_ground 0",
            "type": "Structure",
            "medium": {
                "name": null,
                "frequency_range": [
                    151926744799612.75,
                    1.5192674479961274e+16
                ],
                "allow_gain": false,
                "nonlinear_spec": null,
                "modulation_spec": null,
                "heat_spec": null,
                "type": "PoleResidue",
                "eps_inf": 1.0,
                "poles": [
                    [
                        {
                            "real": -176076476399307.25,
                            "imag": 0.0
                        },
                        {
                            "real": -2.0497198166085053e+17,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -55958309702844.36,
                            "imag": 0.0
                        },
                        {
                            "real": -1.9328759376610138e+18,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -32886941985772.406,
                            "imag": 0.0
                        },
                        {
                            "real": 2.985600009810314e+17,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -836904963.7321033,
                            "imag": 0.0
                        },
                        {
                            "real": 1.9664479588602982e+18,
                            "imag": 0.0
                        }
                    ]
                ]
            }
        },
        {
            "geometry": {
                "type": "Box",
                "center": [
                    0.0,
                    0.0,
                    -0.6338141619570937
                ],
                "size": [
                    "Infinity",
                    0.3,
                    0.1
                ]
            },
            "name": "interconnect_ground 1",
            "type": "Structure",
            "medium": {
                "name": null,
                "frequency_range": [
                    151926744799612.75,
                    1.5192674479961274e+16
                ],
                "allow_gain": false,
                "nonlinear_spec": null,
                "modulation_spec": null,
                "heat_spec": null,
                "type": "PoleResidue",
                "eps_inf": 1.0,
                "poles": [
                    [
                        {
                            "real": -176076476399307.25,
                            "imag": 0.0
                        },
                        {
                            "real": -2.0497198166085053e+17,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -55958309702844.36,
                            "imag": 0.0
                        },
                        {
                            "real": -1.9328759376610138e+18,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -32886941985772.406,
                            "imag": 0.0
                        },
                        {
                            "real": 2.985600009810314e+17,
                            "imag": 0.0
                        }
                    ],
                    [
                        {
                            "real": -836904963.7321033,
                            "imag": 0.0
                        },
                        {
                            "real": 1.9664479588602982e+18,
                            "imag": 0.0
                        }
                    ]
                ]
            }
        },
        {
            "geometry": {
                "type": "Box",
                "center": [
                    0.0,
                    0.0,
                    -1.519281086116926
                ],
                "size": [
                    "Infinity",
                    "Infinity",
                    0.07093384831966464
                ]
            },
            "name": "anti-reflection",
            "type": "Structure",
            "medium": {
                "name": null,
                "frequency_range": [
                    145079354536315.6,
                    1450793545363156.0
                ],
                "allow_gain": false,
                "nonlinear_spec": null,
                "modulation_spec": null,
                "heat_spec": null,
                "type": "PoleResidue",
                "eps_inf": 2.32,
                "poles": [
                    [
                        {
                            "real": -302334222151229.3,
                            "imag": -9863009385232968.0
                        },
                        {
                            "real": 0.0,
                            "imag": 6244215164693547.0
                        }
                    ]
                ]
            }
        },
        {
            "geometry": {
                "type": "Box",
                "center": [
                    0.0,
                    0.0,
                    -103.55474801027675
                ],
                "size": [
                    "Infinity",
                    "Infinity",
                    204.0
                ]
            },
            "name": "silicon layer",
            "type": "Structure",
            "medium": {
                "name": null,
                "frequency_range": [
                    362698386340789.0,
                    1450793545363156.0
                ],
                "allow_gain": false,
                "nonlinear_spec": null,
                "modulation_spec": null,
                "heat_spec": null,
                "type": "PoleResidue",
                "eps_inf": 3.109,
                "poles": [
                    [
                        {
                            "real": -1458496750076282.0,
                            "imag": -5789844327200831.0
                        },
                        {
                            "real": 0.0,
                            "imag": 4.485863370051096e+16
                        }
                    ]
                ]
            }
        }
    ],
    "symmetry": [
        0,
        0,
        0
    ],
    "sources": [
        {
            "name": "planewave",
            "type": "PlaneWave",
            "center": [
                0.0,
                0.0,
                2.8047480102767586
            ],
            "size": [
                "Infinity",
                "Infinity",
                0.0
            ],
            "source_time": {
                "amplitude": 1.0,
                "phase": 0.0,
                "type": "GaussianPulse",
                "freq0": 588878042500000.0,
                "fwidth": 196292680833333.34,
                "offset": 5.0,
                "remove_dc_component": true
            },
            "direction": "-",
            "angle_theta": 0.0,
            "angle_phi": 0.0,
            "pol_angle": 0.0
        }
    ],
    "boundary_spec": {
        "x": {
            "plus": {
                "name": null,
                "type": "Periodic"
            },
            "minus": {
                "name": null,
                "type": "Periodic"
            },
            "type": "Boundary"
        },
        "y": {
            "plus": {
                "name": null,
                "type": "Periodic"
            },
            "minus": {
                "name": null,
                "type": "Periodic"
            },
            "type": "Boundary"
        },
        "z": {
            "plus": {
                "name": null,
                "type": "Absorber",
                "num_layers": 40,
                "parameters": {
                    "sigma_order": 3,
                    "sigma_min": 0.0,
                    "sigma_max": 6.4,
                    "type": "AbsorberParams"
                }
            },
            "minus": {
                "name": null,
                "type": "Absorber",
                "num_layers": 40,
                "parameters": {
                    "sigma_order": 3,
                    "sigma_min": 0.0,
                    "sigma_max": 6.4,
                    "type": "AbsorberParams"
                }
            },
            "type": "Boundary"
        },
        "type": "BoundarySpec"
    },
    "monitors": [
        {
            "type": "FieldMonitor",
            "center": [
                0.0,
                0.0,
                -1.5557480102767585
            ],
            "size": [
                "Infinity",
                "Infinity",
                0.0
            ],
            "name": "field_xy_silicon",
            "interval_space": [
                1,
                1,
                1
            ],
            "colocate": true,
            "freqs": [
                461219166153846.1,
                545077196363636.3,
                666205462222222.2
            ],
            "apodization": {
                "start": null,
                "end": null,
                "width": null,
                "type": "ApodizationSpec"
            },
            "fields": [
                "Ex",
                "Ey",
                "Ez",
                "Hx",
                "Hy",
                "Hz"
            ]
        },
        {
            "type": "FieldMonitor",
            "center": [
                0.75,
                0.0,
                0.0
            ],
            "size": [
                0.0,
                "Infinity",
                "Infinity"
            ],
            "name": "field_yz_BG",
            "interval_space": [
                1,
                1,
                1
            ],
            "colocate": true,
            "freqs": [
                461219166153846.1,
                545077196363636.3,
                666205462222222.2
            ],
            "apodization": {
                "start": null,
                "end": null,
                "width": null,
                "type": "ApodizationSpec"
            },
            "fields": [
                "Ex",
                "Ey",
                "Ez",
                "Hx",
                "Hy",
                "Hz"
            ]
        },
        {
            "type": "FieldMonitor",
            "center": [
                -0.75,
                0.0,
                0.0
            ],
            "size": [
                0.0,
                "Infinity",
                "Infinity"
            ],
            "name": "field_yz_GR",
            "interval_space": [
                1,
                1,
                1
            ],
            "colocate": true,
            "freqs": [
                461219166153846.1,
                545077196363636.3,
                666205462222222.2
            ],
            "apodization": {
                "start": null,
                "end": null,
                "width": null,
                "type": "ApodizationSpec"
            },
            "fields": [
                "Ex",
                "Ey",
                "Ez",
                "Hx",
                "Hy",
                "Hz"
            ]
        },
        {
            "type": "FluxMonitor",
            "center": [
                0.75,
                0.75,
                -1.5547480102767586
            ],
            "size": [
                1.0499999999999998,
                1.0499999999999998,
                0.0
            ],
            "name": "flux_si_blue",
            "interval_space": [
                1,
                1,
                1
            ],
            "colocate": true,
            "freqs": [
                428274940000000.0,
                429889041532663.3,
                431503143065326.6,
                433117244597989.94,
                434731346130653.25,
                436345447663316.56,
                437959549195979.9,
                439573650728643.2,
                441187752261306.56,
                442801853793969.9,
                444415955326633.2,
                446030056859296.5,
                447644158391959.8,
                449258259924623.1,
                450872361457286.44,
                452486462989949.75,
                454100564522613.06,
                455714666055276.4,
                457328767587939.7,
                458942869120603.0,
                460556970653266.3,
                462171072185929.6,
                463785173718593.0,
                465399275251256.25,
                467013376783919.6,
                468627478316582.94,
                470241579849246.25,
                471855681381909.56,
                473469782914572.9,
                475083884447236.2,
                476697985979899.5,
                478312087512562.8,
                479926189045226.1,
                481540290577889.44,
                483154392110552.75,
                484768493643216.06,
                486382595175879.4,
                487996696708542.75,
                489610798241206.0,
                491224899773869.4,
                492839001306532.7,
                494453102839196.0,
                496067204371859.3,
                497681305904522.6,
                499295407437185.94,
                500909508969849.25,
                502523610502512.56,
                504137712035175.9,
                505751813567839.2,
                507365915100502.5,
                508980016633165.8,
                510594118165829.1,
                512208219698492.5,
                513822321231155.75,
                515436422763819.1,
                517050524296482.44,
                518664625829145.75,
                520278727361809.06,
                521892828894472.4,
                523506930427135.7,
                525121031959799.0,
                526735133492462.3,
                528349235025125.6,
                529963336557788.94,
                531577438090452.25,
                533191539623115.56,
                534805641155778.9,
                536419742688442.25,
                538033844221105.5,
                539647945753768.9,
                541262047286432.2,
                542876148819095.5,
                544490250351758.8,
                546104351884422.1,
                547718453417085.44,
                549332554949748.75,
                550946656482412.06,
                552560758015075.4,
                554174859547738.7,
                555788961080402.0,
                557403062613065.3,
                559017164145728.6,
                560631265678392.0,
                562245367211055.25,
                563859468743718.6,
                565473570276381.9,
                567087671809045.2,
                568701773341708.5,
                570315874874371.9,
                571929976407035.2,
                573544077939698.5,
                575158179472361.8,
                576772281005025.1,
                578386382537688.5,
                580000484070351.8,
                581614585603015.1,
                583228687135678.4,
                584842788668341.8,
                586456890201005.0,
                588070991733668.4,
                589685093266331.6,
                591299194798995.0,
                592913296331658.2,
                594527397864321.6,
                596141499396985.0,
                597755600929648.2,
                599369702462311.5,
                600983803994974.9,
                602597905527638.2,
                604212007060301.5,
                605826108592964.9,
                607440210125628.1,
                609054311658291.5,
                610668413190954.8,
                612282514723618.1,
                613896616256281.4,
                615510717788944.8,
                617124819321608.0,
                618738920854271.4,
                620353022386934.8,
                621967123919598.0,
                623581225452261.2,
                625195326984924.6,
                626809428517588.0,
                628423530050251.2,
                630037631582914.6,
                631651733115577.9,
                633265834648241.2,
                634879936180904.5,
                636494037713567.9,
                638108139246231.1,
                639722240778894.5,
                641336342311557.8,
                642950443844221.1,
                644564545376884.5,
                646178646909547.8,
                647792748442211.0,
                649406849974874.4,
                651020951507537.8,
                652635053040201.0,
                654249154572864.4,
                655863256105527.6,
                657477357638191.0,
                659091459170854.2,
                660705560703517.6,
                662319662236180.9,
                663933763768844.2,
                665547865301507.5,
                667161966834170.9,
                668776068366834.2,
                670390169899497.5,
                672004271432160.8,
                673618372964824.1,
                675232474497487.5,
                676846576030150.8,
                678460677562814.1,
                680074779095477.4,
                681688880628140.8,
                683302982160804.0,
                684917083693467.4,
                686531185226130.6,
                688145286758794.0,
                689759388291457.2,
                691373489824120.6,
                692987591356784.0,
                694601692889447.2,
                696215794422110.5,
                697829895954773.9,
                699443997487437.2,
                701058099020100.5,
                702672200552763.9,
                704286302085427.1,
                705900403618090.5,
                707514505150753.8,
                709128606683417.1,
                710742708216080.5,
                712356809748743.8,
                713970911281407.0,
                715585012814070.4,
                717199114346733.8,
                718813215879397.0,
                720427317412060.2,
                722041418944723.6,
                723655520477387.0,
                725269622010050.2,
                726883723542713.5,
                728497825075376.9,
                730111926608040.2,
                731726028140703.5,
                733340129673366.9,
                734954231206030.2,
                736568332738693.5,
                738182434271356.8,
                739796535804020.1,
                741410637336683.5,
                743024738869346.8,
                744638840402010.0,
                746252941934673.4,
                747867043467336.8,
                749481145000000.0
            ],
            "apodization": {
                "start": null,
                "end": null,
                "width": null,
                "type": "ApodizationSpec"
            },
            "normal_dir": "+",
            "exclude_surfaces": null
        },
        {
            "type": "FluxMonitor",
            "center": [
                -0.75,
                -0.75,
                -1.5547480102767586
            ],
            "size": [
                1.0499999999999998,
                1.0499999999999998,
                0.0
            ],
            "name": "flux_si_red",
            "interval_space": [
                1,
                1,
                1
            ],
            "colocate": true,
            "freqs": [
                428274940000000.0,
                429889041532663.3,
                431503143065326.6,
                433117244597989.94,
                434731346130653.25,
                436345447663316.56,
                437959549195979.9,
                439573650728643.2,
                441187752261306.56,
                442801853793969.9,
                444415955326633.2,
                446030056859296.5,
                447644158391959.8,
                449258259924623.1,
                450872361457286.44,
                452486462989949.75,
                454100564522613.06,
                455714666055276.4,
                457328767587939.7,
                458942869120603.0,
                460556970653266.3,
                462171072185929.6,
                463785173718593.0,
                465399275251256.25,
                467013376783919.6,
                468627478316582.94,
                470241579849246.25,
                471855681381909.56,
                473469782914572.9,
                475083884447236.2,
                476697985979899.5,
                478312087512562.8,
                479926189045226.1,
                481540290577889.44,
                483154392110552.75,
                484768493643216.06,
                486382595175879.4,
                487996696708542.75,
                489610798241206.0,
                491224899773869.4,
                492839001306532.7,
                494453102839196.0,
                496067204371859.3,
                497681305904522.6,
                499295407437185.94,
                500909508969849.25,
                502523610502512.56,
                504137712035175.9,
                505751813567839.2,
                507365915100502.5,
                508980016633165.8,
                510594118165829.1,
                512208219698492.5,
                513822321231155.75,
                515436422763819.1,
                517050524296482.44,
                518664625829145.75,
                520278727361809.06,
                521892828894472.4,
                523506930427135.7,
                525121031959799.0,
                526735133492462.3,
                528349235025125.6,
                529963336557788.94,
                531577438090452.25,
                533191539623115.56,
                534805641155778.9,
                536419742688442.25,
                538033844221105.5,
                539647945753768.9,
                541262047286432.2,
                542876148819095.5,
                544490250351758.8,
                546104351884422.1,
                547718453417085.44,
                549332554949748.75,
                550946656482412.06,
                552560758015075.4,
                554174859547738.7,
                555788961080402.0,
                557403062613065.3,
                559017164145728.6,
                560631265678392.0,
                562245367211055.25,
                563859468743718.6,
                565473570276381.9,
                567087671809045.2,
                568701773341708.5,
                570315874874371.9,
                571929976407035.2,
                573544077939698.5,
                575158179472361.8,
                576772281005025.1,
                578386382537688.5,
                580000484070351.8,
                581614585603015.1,
                583228687135678.4,
                584842788668341.8,
                586456890201005.0,
                588070991733668.4,
                589685093266331.6,
                591299194798995.0,
                592913296331658.2,
                594527397864321.6,
                596141499396985.0,
                597755600929648.2,
                599369702462311.5,
                600983803994974.9,
                602597905527638.2,
                604212007060301.5,
                605826108592964.9,
                607440210125628.1,
                609054311658291.5,
                610668413190954.8,
                612282514723618.1,
                613896616256281.4,
                615510717788944.8,
                617124819321608.0,
                618738920854271.4,
                620353022386934.8,
                621967123919598.0,
                623581225452261.2,
                625195326984924.6,
                626809428517588.0,
                628423530050251.2,
                630037631582914.6,
                631651733115577.9,
                633265834648241.2,
                634879936180904.5,
                636494037713567.9,
                638108139246231.1,
                639722240778894.5,
                641336342311557.8,
                642950443844221.1,
                644564545376884.5,
                646178646909547.8,
                647792748442211.0,
                649406849974874.4,
                651020951507537.8,
                652635053040201.0,
                654249154572864.4,
                655863256105527.6,
                657477357638191.0,
                659091459170854.2,
                660705560703517.6,
                662319662236180.9,
                663933763768844.2,
                665547865301507.5,
                667161966834170.9,
                668776068366834.2,
                670390169899497.5,
                672004271432160.8,
                673618372964824.1,
                675232474497487.5,
                676846576030150.8,
                678460677562814.1,
                680074779095477.4,
                681688880628140.8,
                683302982160804.0,
                684917083693467.4,
                686531185226130.6,
                688145286758794.0,
                689759388291457.2,
                691373489824120.6,
                692987591356784.0,
                694601692889447.2,
                696215794422110.5,
                697829895954773.9,
                699443997487437.2,
                701058099020100.5,
                702672200552763.9,
                704286302085427.1,
                705900403618090.5,
                707514505150753.8,
                709128606683417.1,
                710742708216080.5,
                712356809748743.8,
                713970911281407.0,
                715585012814070.4,
                717199114346733.8,
                718813215879397.0,
                720427317412060.2,
                722041418944723.6,
                723655520477387.0,
                725269622010050.2,
                726883723542713.5,
                728497825075376.9,
                730111926608040.2,
                731726028140703.5,
                733340129673366.9,
                734954231206030.2,
                736568332738693.5,
                738182434271356.8,
                739796535804020.1,
                741410637336683.5,
                743024738869346.8,
                744638840402010.0,
                746252941934673.4,
                747867043467336.8,
                749481145000000.0
            ],
            "apodization": {
                "start": null,
                "end": null,
                "width": null,
                "type": "ApodizationSpec"
            },
            "normal_dir": "+",
            "exclude_surfaces": null
        },
        {
            "type": "FluxMonitor",
            "center": [
                -0.75,
                0.75,
                -1.5547480102767586
            ],
            "size": [
                1.0499999999999998,
                1.0499999999999998,
                0.0
            ],
            "name": "flux_si_green1",
            "interval_space": [
                1,
                1,
                1
            ],
            "colocate": true,
            "freqs": [
                428274940000000.0,
                429889041532663.3,
                431503143065326.6,
                433117244597989.94,
                434731346130653.25,
                436345447663316.56,
                437959549195979.9,
                439573650728643.2,
                441187752261306.56,
                442801853793969.9,
                444415955326633.2,
                446030056859296.5,
                447644158391959.8,
                449258259924623.1,
                450872361457286.44,
                452486462989949.75,
                454100564522613.06,
                455714666055276.4,
                457328767587939.7,
                458942869120603.0,
                460556970653266.3,
                462171072185929.6,
                463785173718593.0,
                465399275251256.25,
                467013376783919.6,
                468627478316582.94,
                470241579849246.25,
                471855681381909.56,
                473469782914572.9,
                475083884447236.2,
                476697985979899.5,
                478312087512562.8,
                479926189045226.1,
                481540290577889.44,
                483154392110552.75,
                484768493643216.06,
                486382595175879.4,
                487996696708542.75,
                489610798241206.0,
                491224899773869.4,
                492839001306532.7,
                494453102839196.0,
                496067204371859.3,
                497681305904522.6,
                499295407437185.94,
                500909508969849.25,
                502523610502512.56,
                504137712035175.9,
                505751813567839.2,
                507365915100502.5,
                508980016633165.8,
                510594118165829.1,
                512208219698492.5,
                513822321231155.75,
                515436422763819.1,
                517050524296482.44,
                518664625829145.75,
                520278727361809.06,
                521892828894472.4,
                523506930427135.7,
                525121031959799.0,
                526735133492462.3,
                528349235025125.6,
                529963336557788.94,
                531577438090452.25,
                533191539623115.56,
                534805641155778.9,
                536419742688442.25,
                538033844221105.5,
                539647945753768.9,
                541262047286432.2,
                542876148819095.5,
                544490250351758.8,
                546104351884422.1,
                547718453417085.44,
                549332554949748.75,
                550946656482412.06,
                552560758015075.4,
                554174859547738.7,
                555788961080402.0,
                557403062613065.3,
                559017164145728.6,
                560631265678392.0,
                562245367211055.25,
                563859468743718.6,
                565473570276381.9,
                567087671809045.2,
                568701773341708.5,
                570315874874371.9,
                571929976407035.2,
                573544077939698.5,
                575158179472361.8,
                576772281005025.1,
                578386382537688.5,
                580000484070351.8,
                581614585603015.1,
                583228687135678.4,
                584842788668341.8,
                586456890201005.0,
                588070991733668.4,
                589685093266331.6,
                591299194798995.0,
                592913296331658.2,
                594527397864321.6,
                596141499396985.0,
                597755600929648.2,
                599369702462311.5,
                600983803994974.9,
                602597905527638.2,
                604212007060301.5,
                605826108592964.9,
                607440210125628.1,
                609054311658291.5,
                610668413190954.8,
                612282514723618.1,
                613896616256281.4,
                615510717788944.8,
                617124819321608.0,
                618738920854271.4,
                620353022386934.8,
                621967123919598.0,
                623581225452261.2,
                625195326984924.6,
                626809428517588.0,
                628423530050251.2,
                630037631582914.6,
                631651733115577.9,
                633265834648241.2,
                634879936180904.5,
                636494037713567.9,
                638108139246231.1,
                639722240778894.5,
                641336342311557.8,
                642950443844221.1,
                644564545376884.5,
                646178646909547.8,
                647792748442211.0,
                649406849974874.4,
                651020951507537.8,
                652635053040201.0,
                654249154572864.4,
                655863256105527.6,
                657477357638191.0,
                659091459170854.2,
                660705560703517.6,
                662319662236180.9,
                663933763768844.2,
                665547865301507.5,
                667161966834170.9,
                668776068366834.2,
                670390169899497.5,
                672004271432160.8,
                673618372964824.1,
                675232474497487.5,
                676846576030150.8,
                678460677562814.1,
                680074779095477.4,
                681688880628140.8,
                683302982160804.0,
                684917083693467.4,
                686531185226130.6,
                688145286758794.0,
                689759388291457.2,
                691373489824120.6,
                692987591356784.0,
                694601692889447.2,
                696215794422110.5,
                697829895954773.9,
                699443997487437.2,
                701058099020100.5,
                702672200552763.9,
                704286302085427.1,
                705900403618090.5,
                707514505150753.8,
                709128606683417.1,
                710742708216080.5,
                712356809748743.8,
                713970911281407.0,
                715585012814070.4,
                717199114346733.8,
                718813215879397.0,
                720427317412060.2,
                722041418944723.6,
                723655520477387.0,
                725269622010050.2,
                726883723542713.5,
                728497825075376.9,
                730111926608040.2,
                731726028140703.5,
                733340129673366.9,
                734954231206030.2,
                736568332738693.5,
                738182434271356.8,
                739796535804020.1,
                741410637336683.5,
                743024738869346.8,
                744638840402010.0,
                746252941934673.4,
                747867043467336.8,
                749481145000000.0
            ],
            "apodization": {
                "start": null,
                "end": null,
                "width": null,
                "type": "ApodizationSpec"
            },
            "normal_dir": "+",
            "exclude_surfaces": null
        },
        {
            "type": "FluxMonitor",
            "center": [
                0.75,
                -0.75,
                -1.5547480102767586
            ],
            "size": [
                1.0499999999999998,
                1.0499999999999998,
                0.0
            ],
            "name": "flux_si_green2",
            "interval_space": [
                1,
                1,
                1
            ],
            "colocate": true,
            "freqs": [
                428274940000000.0,
                429889041532663.3,
                431503143065326.6,
                433117244597989.94,
                434731346130653.25,
                436345447663316.56,
                437959549195979.9,
                439573650728643.2,
                441187752261306.56,
                442801853793969.9,
                444415955326633.2,
                446030056859296.5,
                447644158391959.8,
                449258259924623.1,
                450872361457286.44,
                452486462989949.75,
                454100564522613.06,
                455714666055276.4,
                457328767587939.7,
                458942869120603.0,
                460556970653266.3,
                462171072185929.6,
                463785173718593.0,
                465399275251256.25,
                467013376783919.6,
                468627478316582.94,
                470241579849246.25,
                471855681381909.56,
                473469782914572.9,
                475083884447236.2,
                476697985979899.5,
                478312087512562.8,
                479926189045226.1,
                481540290577889.44,
                483154392110552.75,
                484768493643216.06,
                486382595175879.4,
                487996696708542.75,
                489610798241206.0,
                491224899773869.4,
                492839001306532.7,
                494453102839196.0,
                496067204371859.3,
                497681305904522.6,
                499295407437185.94,
                500909508969849.25,
                502523610502512.56,
                504137712035175.9,
                505751813567839.2,
                507365915100502.5,
                508980016633165.8,
                510594118165829.1,
                512208219698492.5,
                513822321231155.75,
                515436422763819.1,
                517050524296482.44,
                518664625829145.75,
                520278727361809.06,
                521892828894472.4,
                523506930427135.7,
                525121031959799.0,
                526735133492462.3,
                528349235025125.6,
                529963336557788.94,
                531577438090452.25,
                533191539623115.56,
                534805641155778.9,
                536419742688442.25,
                538033844221105.5,
                539647945753768.9,
                541262047286432.2,
                542876148819095.5,
                544490250351758.8,
                546104351884422.1,
                547718453417085.44,
                549332554949748.75,
                550946656482412.06,
                552560758015075.4,
                554174859547738.7,
                555788961080402.0,
                557403062613065.3,
                559017164145728.6,
                560631265678392.0,
                562245367211055.25,
                563859468743718.6,
                565473570276381.9,
                567087671809045.2,
                568701773341708.5,
                570315874874371.9,
                571929976407035.2,
                573544077939698.5,
                575158179472361.8,
                576772281005025.1,
                578386382537688.5,
                580000484070351.8,
                581614585603015.1,
                583228687135678.4,
                584842788668341.8,
                586456890201005.0,
                588070991733668.4,
                589685093266331.6,
                591299194798995.0,
                592913296331658.2,
                594527397864321.6,
                596141499396985.0,
                597755600929648.2,
                599369702462311.5,
                600983803994974.9,
                602597905527638.2,
                604212007060301.5,
                605826108592964.9,
                607440210125628.1,
                609054311658291.5,
                610668413190954.8,
                612282514723618.1,
                613896616256281.4,
                615510717788944.8,
                617124819321608.0,
                618738920854271.4,
                620353022386934.8,
                621967123919598.0,
                623581225452261.2,
                625195326984924.6,
                626809428517588.0,
                628423530050251.2,
                630037631582914.6,
                631651733115577.9,
                633265834648241.2,
                634879936180904.5,
                636494037713567.9,
                638108139246231.1,
                639722240778894.5,
                641336342311557.8,
                642950443844221.1,
                644564545376884.5,
                646178646909547.8,
                647792748442211.0,
                649406849974874.4,
                651020951507537.8,
                652635053040201.0,
                654249154572864.4,
                655863256105527.6,
                657477357638191.0,
                659091459170854.2,
                660705560703517.6,
                662319662236180.9,
                663933763768844.2,
                665547865301507.5,
                667161966834170.9,
                668776068366834.2,
                670390169899497.5,
                672004271432160.8,
                673618372964824.1,
                675232474497487.5,
                676846576030150.8,
                678460677562814.1,
                680074779095477.4,
                681688880628140.8,
                683302982160804.0,
                684917083693467.4,
                686531185226130.6,
                688145286758794.0,
                689759388291457.2,
                691373489824120.6,
                692987591356784.0,
                694601692889447.2,
                696215794422110.5,
                697829895954773.9,
                699443997487437.2,
                701058099020100.5,
                702672200552763.9,
                704286302085427.1,
                705900403618090.5,
                707514505150753.8,
                709128606683417.1,
                710742708216080.5,
                712356809748743.8,
                713970911281407.0,
                715585012814070.4,
                717199114346733.8,
                718813215879397.0,
                720427317412060.2,
                722041418944723.6,
                723655520477387.0,
                725269622010050.2,
                726883723542713.5,
                728497825075376.9,
                730111926608040.2,
                731726028140703.5,
                733340129673366.9,
                734954231206030.2,
                736568332738693.5,
                738182434271356.8,
                739796535804020.1,
                741410637336683.5,
                743024738869346.8,
                744638840402010.0,
                746252941934673.4,
                747867043467336.8,
                749481145000000.0
            ],
            "apodization": {
                "start": null,
                "end": null,
                "width": null,
                "type": "ApodizationSpec"
            },
            "normal_dir": "+",
            "exclude_surfaces": null
        }
    ],
    "grid_spec": {
        "grid_x": {
            "type": "AutoGrid",
            "min_steps_per_wvl": 10.0,
            "max_scale": 1.4,
            "dl_min": 0.0,
            "mesher": {
                "type": "GradedMesher"
            }
        },
        "grid_y": {
            "type": "AutoGrid",
            "min_steps_per_wvl": 10.0,
            "max_scale": 1.4,
            "dl_min": 0.0,
            "mesher": {
                "type": "GradedMesher"
            }
        },
        "grid_z": {
            "type": "AutoGrid",
            "min_steps_per_wvl": 10.0,
            "max_scale": 1.4,
            "dl_min": 0.0,
            "mesher": {
                "type": "GradedMesher"
            }
        },
        "wavelength": 0.55,
        "override_structures": [],
        "type": "GridSpec"
    },
    "version": "2.5.0rc2",
    "run_time": 5.094433453935412e-13,
    "shutoff": 1e-05,
    "subpixel": true,
    "normalize_index": 0,
    "courant": 0.99
}}, '*')
        }
    };
    window.addEventListener(
        'message',
        window.postMessageToViewer169973681745826303,
        false
    );
    
    </script>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Structure-Visualization">Structure Visualization<a class="anchor-link" href="#Structure-Visualization">¶</a></h2><p>Let's observe the simulation set up to verify if all the components are in their correct places.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[22]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span><span class="n">tight_layout</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">width_len</span><span class="o">/</span><span class="mf">1.99</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">sim</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">width_len</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">sim</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="n">width_len</span><span class="o">/</span><span class="mf">1.99</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="n">sim</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">y</span><span class="o">=-</span><span class="n">width_len</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"G1   B"</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"G2   B"</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"R   G2"</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"R   G1"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="/assets/tidy3d/examples/image/CMOSRGBSensor/CMOSRGBSensor_3.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Simulation-Run">Simulation Run<a class="anchor-link" href="#Simulation-Run">¶</a></h2><p>Now, we can send the set up information to the cloud and run the simulation.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[23]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">sim_data</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">task_name</span><span class="o">=</span><span class="s2">"RGB CMOS Sensor"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">18:06:59 -03 </span>Created task <span style="color: #008000; text-decoration-color: #008000">'RGB CMOS Sensor'</span> with task_id                        
<span style="color: #7fbfbf; text-decoration-color: #7fbfbf">             </span><span style="color: #008000; text-decoration-color: #008000">'fdve-813aa854-debf-40fb-9c51-e271e98e1b6e'</span> and task_type <span style="color: #008000; text-decoration-color: #008000">'FDTD'</span>.  
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">             </span>View task using web UI at                                          
<span style="color: #7fbfbf; text-decoration-color: #7fbfbf">             </span><a href="https://tidy3d.simulation.cloud/workbench?taskId=fdve-813aa854-debf-40fb-9c51-e271e98e1b6e" target="_blank"><span style="color: #008000; text-decoration-color: #008000">'https://tidy3d.simulation.cloud/workbench?taskId=fdve-813aa854-deb</span></a>
<span style="color: #7fbfbf; text-decoration-color: #7fbfbf">             </span><a href="https://tidy3d.simulation.cloud/workbench?taskId=fdve-813aa854-debf-40fb-9c51-e271e98e1b6e" target="_blank"><span style="color: #008000; text-decoration-color: #008000">f-40fb-9c51-e271e98e1b6e'</span></a>.                                         
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Output()</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">18:07:02 -03 </span>status = queued                                                    
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Output()</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">18:07:11 -03 </span>status = preprocess                                                
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">18:07:16 -03 </span>Maximum FlexCredit cost: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1.761</span>. Use <span style="color: #008000; text-decoration-color: #008000">'web.real_cost(task_id)'</span> to get
<span style="color: #7fbfbf; text-decoration-color: #7fbfbf">             </span>the billed FlexCredit cost after a simulation run.                 
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">             </span>starting up solver                                                 
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">             </span>running solver                                                     
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">             </span>To cancel the simulation, use <span style="color: #008000; text-decoration-color: #008000">'web.abort(task_id)'</span> or              
<span style="color: #7fbfbf; text-decoration-color: #7fbfbf">             </span><span style="color: #008000; text-decoration-color: #008000">'web.delete(task_id)'</span> or abort/delete the task in the web UI.      
<span style="color: #7fbfbf; text-decoration-color: #7fbfbf">             </span>Terminating the Python script will not stop the job running on the 
<span style="color: #7fbfbf; text-decoration-color: #7fbfbf">             </span>cloud.                                                             
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Output()</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">18:08:28 -03 </span>early shutoff detected at <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">56</span>%, exiting.                            
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">             </span>status = postprocess                                               
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Output()</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">18:08:34 -03 </span>status = success                                                   
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">             </span>View simulation result at                                          
<span style="color: #7fbfbf; text-decoration-color: #7fbfbf">             </span><a href="https://tidy3d.simulation.cloud/workbench?taskId=fdve-813aa854-debf-40fb-9c51-e271e98e1b6e" target="_blank"><span style="color: #000080; text-decoration-color: #000080; text-decoration: underline">'https://tidy3d.simulation.cloud/workbench?taskId=fdve-813aa854-deb</span></a>
<span style="color: #7fbfbf; text-decoration-color: #7fbfbf">             </span><a href="https://tidy3d.simulation.cloud/workbench?taskId=fdve-813aa854-debf-40fb-9c51-e271e98e1b6e" target="_blank"><span style="color: #000080; text-decoration-color: #000080; text-decoration: underline">f-40fb-9c51-e271e98e1b6e'</span></a><span style="color: #000080; text-decoration-color: #000080; text-decoration: underline">.</span>                                         
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Output()</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">18:08:50 -03 </span>loading simulation from simulation_data.hdf5                       
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Post-Run-Analysis">Post Run Analysis<a class="anchor-link" href="#Post-Run-Analysis">¶</a></h2><p>Once the simulation has completed, we can take a look at the simulation log and afterward analyze the results.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[24]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">sim_data</span><span class="o">.</span><span class="n">log</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Simulation domain Nx, Ny, Nz: [390, 390, 430]
Applied symmetries: (0, 0, 0)
Number of computational grid points: 6.5707e+07.
Using subpixel averaging: True
Number of time steps: 3.5349e+04
Automatic shutoff factor: 1.00e-05
Time step (s): 1.4412e-17


Compute source modes time (s):     0.4926
Compute monitor modes time (s):    0.0022
Rest of setup time (s):            7.1181

Running solver for 35349 time steps...
- Time step    281 / time 4.05e-15s (  0 % done), field decay: 1.00e+00
- Time step   1413 / time 2.04e-14s (  4 % done), field decay: 7.81e-02
- Time step   2827 / time 4.07e-14s (  8 % done), field decay: 2.42e-02
- Time step   4241 / time 6.11e-14s ( 12 % done), field decay: 7.90e-03
- Time step   5655 / time 8.15e-14s ( 16 % done), field decay: 1.98e-03
- Time step   7069 / time 1.02e-13s ( 20 % done), field decay: 7.30e-04
- Time step   8483 / time 1.22e-13s ( 24 % done), field decay: 3.07e-04
- Time step   9897 / time 1.43e-13s ( 28 % done), field decay: 1.37e-04
- Time step  11311 / time 1.63e-13s ( 32 % done), field decay: 8.80e-05
- Time step  12725 / time 1.83e-13s ( 36 % done), field decay: 5.80e-05
- Time step  14139 / time 2.04e-13s ( 40 % done), field decay: 3.57e-05
- Time step  15553 / time 2.24e-13s ( 44 % done), field decay: 2.72e-05
- Time step  16967 / time 2.45e-13s ( 48 % done), field decay: 1.82e-05
- Time step  18381 / time 2.65e-13s ( 52 % done), field decay: 1.36e-05
- Time step  19795 / time 2.85e-13s ( 56 % done), field decay: 9.38e-06
Field decay smaller than shutoff factor, exiting solver.

Solver time (s):                   59.7472
Data write time (s):               0.1955

</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Field-profile">Field profile<a class="anchor-link" href="#Field-profile">¶</a></h3><p>Let's visualize the field profile at the central wavelength of each RBG color. First, we illustrate the propagation of the light by showing the fields in the <code>yz</code> cross-section.</p>
<p>In the figure below, the cross-section passes through the G1 and B filters. As you can see, the red light is largely absorbed, while the blue and the green light pass through the corresponding filters.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[25]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">sim_data</span><span class="o">.</span><span class="n">plot_field</span><span class="p">(</span><span class="s1">'field_yz_BG'</span><span class="p">,</span> <span class="s1">'E'</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="s1">'abs^2'</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">f</span><span class="o">=</span><span class="n">td</span><span class="o">.</span><span class="n">C_0</span><span class="o">/</span><span class="n">lam_red</span><span class="p">)</span>
<span class="n">sim_data</span><span class="o">.</span><span class="n">plot_field</span><span class="p">(</span><span class="s1">'field_yz_BG'</span><span class="p">,</span> <span class="s1">'E'</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="s1">'abs^2'</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="o">=</span><span class="n">td</span><span class="o">.</span><span class="n">C_0</span><span class="o">/</span><span class="n">lam_green</span><span class="p">)</span>
<span class="n">sim_data</span><span class="o">.</span><span class="n">plot_field</span><span class="p">(</span><span class="s1">'field_yz_BG'</span><span class="p">,</span> <span class="s1">'E'</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="s1">'abs^2'</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">f</span><span class="o">=</span><span class="n">td</span><span class="o">.</span><span class="n">C_0</span><span class="o">/</span><span class="n">lam_blue</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">'$\lambda = 650$ nm'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">'$\lambda = 550$ nm'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">'$\lambda = 450$ nm'</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'G1 B sensor cross-section'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="/assets/tidy3d/examples/image/CMOSRGBSensor/CMOSRGBSensor_4.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Similarly, in the figure below, the cross-section passes through the R and G2 filters. Consequently, the blue light is largely absorbed, while the red and the green light pass through the corresponding filters.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[26]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">sim_data</span><span class="o">.</span><span class="n">plot_field</span><span class="p">(</span><span class="s1">'field_yz_GR'</span><span class="p">,</span> <span class="s1">'E'</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="s1">'abs^2'</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">f</span><span class="o">=</span><span class="n">td</span><span class="o">.</span><span class="n">C_0</span><span class="o">/</span><span class="n">lam_red</span><span class="p">)</span>
<span class="n">sim_data</span><span class="o">.</span><span class="n">plot_field</span><span class="p">(</span><span class="s1">'field_yz_GR'</span><span class="p">,</span> <span class="s1">'E'</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="s1">'abs^2'</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="o">=</span><span class="n">td</span><span class="o">.</span><span class="n">C_0</span><span class="o">/</span><span class="n">lam_green</span><span class="p">)</span>
<span class="n">sim_data</span><span class="o">.</span><span class="n">plot_field</span><span class="p">(</span><span class="s1">'field_yz_GR'</span><span class="p">,</span> <span class="s1">'E'</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="s1">'abs^2'</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">f</span><span class="o">=</span><span class="n">td</span><span class="o">.</span><span class="n">C_0</span><span class="o">/</span><span class="n">lam_blue</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">'$\lambda = 650$ nm'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">'$\lambda = 550$ nm'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">'$\lambda = 450$ nm'</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'R G2 sensor cross-section'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="/assets/tidy3d/examples/image/CMOSRGBSensor/CMOSRGBSensor_5.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Finally, let's visualize the field on the top of the silicon photodetector layer. The figure below shows the fields in the xy cross-section. Recall that the red filter takes place in the lower left part of the cross-section, the blue in the upper right, and the green in the lower right and upper left. As expected, the field at each color is concentrated in the corresponding regions.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[27]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span> <span class="n">tight_layout</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">sim_data</span><span class="o">.</span><span class="n">plot_field</span><span class="p">(</span><span class="s1">'field_xy_silicon'</span><span class="p">,</span> <span class="s1">'E'</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="s1">'abs^2'</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">f</span><span class="o">=</span><span class="n">td</span><span class="o">.</span><span class="n">C_0</span><span class="o">/</span><span class="n">lam_red</span><span class="p">)</span>
<span class="n">sim_data</span><span class="o">.</span><span class="n">plot_field</span><span class="p">(</span><span class="s1">'field_xy_silicon'</span><span class="p">,</span> <span class="s1">'E'</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="s1">'abs^2'</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="o">=</span><span class="n">td</span><span class="o">.</span><span class="n">C_0</span><span class="o">/</span><span class="n">lam_green</span><span class="p">)</span>
<span class="n">sim_data</span><span class="o">.</span><span class="n">plot_field</span><span class="p">(</span><span class="s1">'field_xy_silicon'</span><span class="p">,</span> <span class="s1">'E'</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="s1">'abs^2'</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">f</span><span class="o">=</span><span class="n">td</span><span class="o">.</span><span class="n">C_0</span><span class="o">/</span><span class="n">lam_blue</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">'R'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">'G'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">'B'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="/assets/tidy3d/examples/image/CMOSRGBSensor/CMOSRGBSensor_6.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Optical-efficiency">Optical efficiency<a class="anchor-link" href="#Optical-efficiency">¶</a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>The optical efficiency ($OE$) is defined as the ratio of the power flux routed to the photodetector of a particular color channel ($P_{CH}$) to the power flux incident on the entire device ($P_{0}$).</p>
<p>$$
OE = \frac{P_{CH}}{P_{0}}
$$</p>
<p>In the figure below, we show the optical efficiency as a function of wavelengths for each color channel. The central wavelength of each color is highlighted with the dashed lines. The flux is automatically normalized by the power flux incident on the entire device. Thus, each flux monitor contains the optical efficiency as a function of frequency.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">[28]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">flux_red</span> <span class="o">=</span> <span class="o">-</span><span class="n">sim_data</span><span class="p">[</span><span class="s1">'flux_si_red'</span><span class="p">]</span><span class="o">.</span><span class="n">flux</span>
<span class="n">flux_blue</span> <span class="o">=</span> <span class="o">-</span><span class="n">sim_data</span><span class="p">[</span><span class="s1">'flux_si_blue'</span><span class="p">]</span><span class="o">.</span><span class="n">flux</span>
<span class="n">flux_green1</span> <span class="o">=</span> <span class="o">-</span><span class="n">sim_data</span><span class="p">[</span><span class="s1">'flux_si_green1'</span><span class="p">]</span><span class="o">.</span><span class="n">flux</span>
<span class="n">flux_green2</span> <span class="o">=</span> <span class="o">-</span><span class="n">sim_data</span><span class="p">[</span><span class="s1">'flux_si_green2'</span><span class="p">]</span><span class="o">.</span><span class="n">flux</span>
<span class="n">flux_green</span> <span class="o">=</span> <span class="n">flux_green1</span> <span class="o">+</span> <span class="n">flux_green2</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">lambda_flux</span> <span class="o">=</span> <span class="n">td</span><span class="o">.</span><span class="n">C_0</span><span class="o">/</span><span class="n">monitor_flux_freqs</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">lambda_flux</span><span class="p">,</span> <span class="n">flux_green</span><span class="p">,</span><span class="s1">'g'</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">lambda_flux</span><span class="p">,</span> <span class="n">flux_red</span><span class="p">,</span><span class="s1">'r'</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">lambda_flux</span><span class="p">,</span> <span class="n">flux_blue</span><span class="p">,</span><span class="s1">'b'</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">'Wavelength ($\mu m$)'</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">'OE'</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span><span class="mf">0.45</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="n">linestyles</span><span class="o">=</span><span class="s1">'dashed'</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="s1">'b'</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span><span class="mf">0.55</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="n">linestyles</span><span class="o">=</span><span class="s1">'dashed'</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="s1">'g'</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span><span class="mf">0.65</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="n">linestyles</span><span class="o">=</span><span class="s1">'dashed'</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="s1">'r'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="/assets/tidy3d/examples/image/CMOSRGBSensor/CMOSRGBSensor_7.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>The above figure shows that the optical efficiency at the central wavelength allows the distinction of colors. However, there is significant room for improvement.</p>
</div>
</div>
</div>
</div>
</main>
</body>
</html>
