(function(){window.$clamp=function(a,b){function c(a,b){return l.getComputedStyle||(l.getComputedStyle=function(a){return this.el=a,this.getPropertyValue=function(b){var c=/(\-([a-z]){1})/g;return"float"==b&&(b="styleFloat"),c.test(b)&&(b=b.replace(c,function(){return arguments[2].toUpperCase()})),a.currentStyle&&a.currentStyle[b]?a.currentStyle[b]:null},this}),l.getComputedStyle(a,null).getPropertyValue(b)}function d(b){var c=b||a.clientHeight,d=f(a);return Math.max(Math.floor(c/d),0)}function e(b){var c=f(a);return c*b}function f(a){var b=c(a,"line-height");return"normal"==b&&(b=1.2*parseInt(c(a,"font-size"))),parseInt(b)}function g(b){return b.lastChild.children&&0<b.lastChild.children.length?g(Array.prototype.slice.call(b.children).pop()):b.lastChild&&b.lastChild.nodeValue&&""!=b.lastChild.nodeValue&&b.lastChild.nodeValue!=m.truncationChar?b.lastChild:(b.lastChild.parentNode.removeChild(b.lastChild),g(a))}function h(b,c){function d(){u=m.splitOnChars.slice(0),v=u[0],s=null,t=null}if(c){var e=b.nodeValue.replace(m.truncationChar,"");if(s||(v=0<u.length?u.shift():"",s=e.split(v)),1<s.length?(t=s.pop(),i(b,s.join(v))):s=null,j&&(b.nodeValue=b.nodeValue.replace(m.truncationChar,""),a.innerHTML=b.nodeValue+" "+j.innerHTML+m.truncationChar),!s)""==v&&(i(b,""),b=g(a),d());else if(a.clientHeight<=c)if(0<=u.length&&""!=v)i(b,s.join(v)+v+t),s=null;else return a.innerHTML;return m.animate?void setTimeout(function(){h(b,c)},!0===m.animate?10:m.animate):h(b,c)}}function i(a,b){a.nodeValue=b+m.truncationChar}b=b||{};var j,k=this,l=window,m={clamp:b.clamp||2,useNativeClamp:!("undefined"!=typeof b.useNativeClamp)||b.useNativeClamp,splitOnChars:b.splitOnChars||[".","-","\u2013","\u2014"," "],animate:b.animate||!1,truncationChar:b.truncationChar!==void 0||null!==b.truncationChar?b.truncationChar:"\u2026",truncationHTML:b.truncationHTML},n=a.style,o=a.innerHTML,p="undefined"!=typeof a.style.webkitLineClamp,q=m.clamp,r=q.indexOf&&(-1<q.indexOf("px")||-1<q.indexOf("em"));m.truncationHTML&&(j=document.createElement("span"),j.innerHTML=m.truncationHTML);var s,t,u=m.splitOnChars.slice(0),v=u[0];"auto"==q?q=d():r&&(q=d(parseInt(q)));var w;if(p&&m.useNativeClamp)n.overflow="hidden",n.textOverflow="ellipsis",n.webkitBoxOrient="vertical",n.display="-webkit-box",n.webkitLineClamp=q,r&&(n.height=m.clamp+"px");else{var x=e(q);x<=a.clientHeight&&(w=h(g(a),x))}return{original:o,clamped:w}}})();
